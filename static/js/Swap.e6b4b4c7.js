(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Swap"],{"265e":function(e,t,i){"use strict";i("cbbc")},"35e3":function(e,t,i){"use strict";i.r(t);i("b0c0"),i("ac1f"),i("1276"),i("a9e3"),i("fb6a"),i("99af");var n=i("7a23"),o=i("e524"),a=i.n(o),s=i("965b"),l=i.n(s),r=function(e){return Object(n["pushScopeId"])("data-v-1de838ef"),e=e(),Object(n["popScopeId"])(),e},c={class:"swap-content"},u={class:"swap-content_left",ref:"swapLeft"},d=["onClick"],m={class:"select-c"},p={class:"card-container"},h={class:"card-container_top flex justify-between items-center"},b=r((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),v={class:"s-text"},f={class:"flex justify-between items-center mt-20"},g=r((function(){return Object(n["createElementVNode"])("div",{style:{height:"0.12rem"}},null,-1)})),k={class:"card-container"},O={class:"card-container_top flex justify-between items-center"},w=r((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),j={class:"s-text"},T={class:"flex justify-between items-center mt-20"},S={key:0},y={key:1},N={key:0,style:{"font-size":"0.24rem"}},$={key:0,style:{"font-size":"0.24rem",color:"#f8be46",margin:"0.1rem 0"}},x={key:1,style:{"font-size":"0.24rem",color:"#F81111",margin:"0.1rem 0"}},_={key:2,style:{"font-size":"0.24rem",color:"#f8be46",margin:"0.1rem 0"}},A={class:"card-container"},V={class:"card-container_top flex justify-between items-center"},C=r((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),E={class:"s-text"},B={class:"flex justify-between items-center mt-20"},I=r((function(){return Object(n["createElementVNode"])("div",{style:{height:"0.12rem"}},null,-1)})),P={class:"card-container"},L={class:"card-container_top flex justify-between items-center"},D=r((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),F={class:"s-text"},G={class:"flex justify-between items-center mt-20"},R={key:0,class:"limit-price-label"},U={key:1,class:"card-container flex justify-between items-center"},M=["disabled"],Q=["disabled"],z={class:"limit-price-label mt-10"},q={class:"card-container flex justify-between items-center"},H=["disabled"],W=["disabled"],J=r((function(){return Object(n["createElementVNode"])("div",{class:"swap-content_center"},null,-1)})),K={class:"right-section-1"},Y=Object(n["createTextVNode"])("+"),X={class:"right-section-2"},Z=Object(n["createTextVNode"])("LP"),ee={key:0,class:"swap-label"},te={class:"swap-label_item-left"},ie={class:"swap-label_item-left"},ne={style:{display:"flex","align-items":"center"}},oe={class:"swap-label_item-left"},ae={class:"swap-label_item-left"},se={key:0},le={key:0,style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:a.a,alt:"",srcset:""},re={key:1},ce={key:1},ue={key:0,style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:a.a,alt:"",srcset:""},de={key:1},me={key:0},pe={key:1,class:"path-amm"},he=r((function(){return Object(n["createElementVNode"])("img",{style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:a.a,alt:"",srcset:""},null,-1)})),be={key:0,class:"select-token iconfont icon-collapse-down"},ve={key:0},fe={class:"swap-label_item-left"},ge={class:"flex items-center"},ke={key:1,class:"swap-label"},Oe={class:"swap-label_item-left"},we={key:0,style:{display:"flex","align-items":"center"}},je={style:{"margin-right":"0.1rem"}},Te={key:1,style:{display:"flex","align-items":"center"}},Se={style:{"margin-right":"0.1rem"}},ye={key:0},Ne={class:"swap-label_item-left"},$e={style:{display:"flex","align-items":"center"}},xe={class:"section-bottom"},_e={class:"title"},Ae=r((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),Ve={key:0,style:{"background-color":"#fff"}},Ce={key:1,style:{"background-color":"#fff"}},Ee={key:2,style:{"background-color":"#fff"}},Be={class:"footer-container"},Ie=r((function(){return Object(n["createElementVNode"])("img",{src:l.a,alt:"",srcset:""},null,-1)})),Pe={style:{background:"#fff","padding-bottom":"1rem"}},Le={class:"token-item header"},De={class:"flex-2"},Fe={class:"flex-1"},Ge={class:"flex-1 right-label"},Re=r((function(){return Object(n["createElementVNode"])("span",{style:{width:"0.32rem"}},null,-1)})),Ue=["onClick"],Me={class:"path-list flex-start flex-2"},Qe={key:0},ze={key:1,class:"path-amm"},qe=r((function(){return Object(n["createElementVNode"])("img",{style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:a.a,alt:"",srcset:""},null,-1)})),He={key:0,class:"tag"},We={class:"flex-1"},Je=Object(n["createTextVNode"])(" <0.01% "),Ke=Object(n["createTextVNode"])(" >40% ");function Ye(e,t,o,a,s,l){var r,Ye,Xe,Ze,et,tt,it,nt,ot,at,st,lt,rt,ct,ut,dt,mt,pt,ht,bt,vt,ft,gt,kt,Ot,wt,jt,Tt,St,yt,Nt,$t,xt,_t,At,Vt=this,Ct=Object(n["resolveComponent"])("RebateImg"),Et=Object(n["resolveComponent"])("van-count-down"),Bt=Object(n["resolveComponent"])("v-select"),It=Object(n["resolveComponent"])("SwapSelectToken"),Pt=Object(n["resolveComponent"])("van-button"),Lt=Object(n["resolveComponent"])("van-field"),Dt=Object(n["resolveComponent"])("PercentStep"),Ft=Object(n["resolveComponent"])("van-form"),Gt=Object(n["resolveComponent"])("van-icon"),Rt=Object(n["resolveComponent"])("PriceChart"),Ut=Object(n["resolveComponent"])("SwapModeSet"),Mt=Object(n["resolveComponent"])("van-image"),Qt=Object(n["resolveComponent"])("SwapGasSet"),zt=Object(n["resolveComponent"])("SlippageButton"),qt=Object(n["resolveComponent"])("van-tab"),Ht=Object(n["resolveComponent"])("van-tabs"),Wt=Object(n["resolveComponent"])("van-checkbox"),Jt=Object(n["resolveComponent"])("van-loading"),Kt=Object(n["resolveComponent"])("TxItem"),Yt=Object(n["resolveComponent"])("DynamicScrollerItem"),Xt=Object(n["resolveComponent"])("DynamicScroller"),Zt=Object(n["resolveComponent"])("van-empty"),ei=Object(n["resolveComponent"])("LimitTxItem"),ti=Object(n["resolveComponent"])("NoGasTxItem"),ii=Object(n["resolveComponent"])("confirm-swap"),ni=Object(n["resolveComponent"])("confirm-limit"),oi=Object(n["resolveComponent"])("van-action-sheet"),ai=Object(n["resolveDirective"])("animation-trigger");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createElementVNode"])("section",{class:"swap-container",style:Object(n["normalizeStyle"])({"--upColor":e.$store.getters.upColor[3],"--downColor":e.$store.getters.downColor[3]})},[Object(n["createVNode"])(Ct,{style:{"padding-left":"0.28rem","padding-right":"0.28rem"}}),Object(n["createVNode"])(Et,{style:{position:"absolute",opacity:"0",height:"0"},ref:"countDown",class:"icon-countDown",time:15e4,format:"sss",onFinish:l.onCountDownFinish},{default:Object(n["withCtx"])((function(e){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.seconds)+"s ",1)]})),_:1},8,["onFinish"]),Object(n["createElementVNode"])("div",c,[Object(n["createElementVNode"])("div",u,[Object(n["createElementVNode"])("div",{class:"tabs-triangle",style:Object(n["normalizeStyle"])({"--upColor":e.$store.getters.upColor[3],"--downColor":e.$store.getters.downColor[3]})},[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(l.typeTabs,(function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("button",{key:t,class:Object(n["normalizeClass"])(["tab-item",{active:s.activeTab===e.type,up:0===s.activeTab,down:1===s.activeTab}]),onClick:Object(n["withModifiers"])((function(t){return l.switchTab(e.type)}),["stop"])},Object(n["toDisplayString"])(e.name),11,d)})),128))],4),Object(n["createElementVNode"])("div",m,[Object(n["createVNode"])(Bt,{modelValue:s.selected,"onUpdate:modelValue":t[0]||(t[0]=function(e){return s.selected=e}),options:l.types,reduce:function(e){return e.value},label:"name",clearable:!1,searchable:!1},null,8,["modelValue","options","reduce"])]),2===s.selected?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:0},[Object(n["createVNode"])(Ft,{class:"swap-form",onSubmit:l.onSubmit,style:{"--van-cell-horizontal-padding":"0","--van-cell-vertical-padding":"0"}},{default:Object(n["withCtx"])((function(){var i,o,a,r,c,u,d,m,$,x,_,A;return[Object(n["createElementVNode"])("div",p,[Object(n["createElementVNode"])("div",h,[Object(n["createVNode"])(It,{tokens:l.swapTokens,token:s.token1,"onUpdate:token":[t[1]||(t[1]=function(e){return s.token1=e}),l.handleSelectToken1],chain:e.$store.getters.netId||(null===(i=e.$route.params)||void 0===i||null===(o=i.id)||void 0===o||null===(a=o.split)||void 0===a||null===(r=a.call(o,"-"))||void 0===r?void 0:r[1])||s.token1.chain||""},null,8,["tokens","token","chain","onUpdate:token"]),b,Object(n["createElementVNode"])("div",v,Object(n["toDisplayString"])(e.$t("balance"))+": "+Object(n["toDisplayString"])(e.$f.formatNumber2((null===(c=s.token1)||void 0===c?void 0:c.balance)||0)),1),1===s.activeTab?(Object(n["openBlock"])(),Object(n["createBlock"])(Pt,{key:0,plain:"",type:"primary",color:"#999",round:"",size:"mini",class:"max-btn",onClick:t[2]||(t[2]=Object(n["withModifiers"])((function(e){return l.handlePercentChange(100)}),["stop"]))},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("max")),1)]})),_:1})):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",f,[0===s.activeTab?(Object(n["openBlock"])(),Object(n["createBlock"])(Lt,{key:0,modelValue:s.toAmount,"onUpdate:modelValue":[t[3]||(t[3]=function(e){return s.toAmount=e}),l.watchToAmount],placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number",onFocus:t[4]||(t[4]=function(t){return e.$refs.percentStep.handleClick(0,!0)})},null,8,["modelValue","onUpdate:modelValue"])):Object(n["createCommentVNode"])("",!0),1===s.activeTab?(Object(n["openBlock"])(),Object(n["createBlock"])(Lt,{key:1,modelValue:s.fromAmount,"onUpdate:modelValue":[t[5]||(t[5]=function(e){return s.fromAmount=e}),l.watchFromAmount],placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number",onFocus:t[6]||(t[6]=function(t){return e.$refs.percentStep.handleClick(0,!0)})},null,8,["modelValue","onUpdate:modelValue"])):Object(n["createCommentVNode"])("",!0)])]),g,Object(n["createElementVNode"])("div",k,[Object(n["createElementVNode"])("div",O,[Object(n["createVNode"])(It,{tokens:l.swapTokens,token:s.token2,"onUpdate:token":[t[7]||(t[7]=function(e){return s.token2=e}),l.handleSelectToken2],chain:e.$store.getters.netId||(null===(u=e.$route.params)||void 0===u||null===(d=u.id)||void 0===d||null===(m=d.split)||void 0===m||null===($=m.call(d,"-"))||void 0===$?void 0:$[1])||s.token2.chain||""},null,8,["tokens","token","chain","onUpdate:token"]),w,Object(n["createElementVNode"])("div",j,Object(n["toDisplayString"])(e.$t("balance"))+": "+Object(n["toDisplayString"])(e.$f.formatNumber2((null===(x=s.token2)||void 0===x?void 0:x.balance)||0)),1),0===s.activeTab?(Object(n["openBlock"])(),Object(n["createBlock"])(Pt,{key:0,plain:"",type:"primary",color:"#999",round:"",size:"mini",class:"max-btn",onClick:t[8]||(t[8]=Object(n["withModifiers"])((function(e){return l.handlePercentChange(100)}),["stop"]))},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("max")),1)]})),_:1})):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",T,[1===s.activeTab?(Object(n["openBlock"])(),Object(n["createBlock"])(Lt,{key:0,modelValue:s.toAmount,"onUpdate:modelValue":[t[9]||(t[9]=function(e){return s.toAmount=e}),l.watchToAmount],placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number",onFocus:t[10]||(t[10]=function(t){return e.$refs.percentStep.handleClick(0,!0)})},null,8,["modelValue","onUpdate:modelValue"])):Object(n["createCommentVNode"])("",!0),0===s.activeTab?(Object(n["openBlock"])(),Object(n["createBlock"])(Lt,{key:1,modelValue:s.fromAmount,"onUpdate:modelValue":[t[11]||(t[11]=function(e){return s.fromAmount=e}),l.watchFromAmount],placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number",onFocus:t[12]||(t[12]=function(t){return e.$refs.percentStep.handleClick(0,!0)})},null,8,["modelValue","onUpdate:modelValue"])):Object(n["createCommentVNode"])("",!0)])]),Object(n["createVNode"])(Dt,{ref:"percentStep",onChange:l.handlePercentChange,activeColor:0===s.activeTab?e.$store.getters.upColor[3]:e.$store.getters.downColor[3]},null,8,["onChange","activeColor"]),!l.isApprove||s.loadingAllowance?(Object(n["openBlock"])(),Object(n["createBlock"])(Pt,{key:0,class:"submit-btn",block:"",color:l.swapButtonColor,"native-type":"submit","loading-text":s.loadingAllowance?e.$t("checkingAllowance"):s.quoteLoading?e.$t("quoting"):s.loadingApprove?e.$t("approve"):"",loading:s.loadingApprove||s.loadingSwap||s.loadingAllowance,disabled:Number(l.fromToken.balance)<Number(Vt.fromAmount)},{default:Object(n["withCtx"])((function(){var t,i;return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(0===Number(l.fromToken.balance)||Number(l.fromToken.balance)<Number(Vt.fromAmount)||""===e.$store.state.currentAccount?null!==(t=l.priceImpactV)&&void 0!==t&&null!==(i=t.gt)&&void 0!==i&&i.call(t,.4)?e.$t("priceImpactTooHigh"):l.checkAmountMessage()||e.$t("approve"):e.$t("approve")),1)]})),_:1},8,["color","loading-text","loading","disabled"])):(Object(n["openBlock"])(),Object(n["createBlock"])(Pt,{key:1,class:"submit-btn",block:"",loading:s.loadingSwap||s.quoteLoading||s.loadingAllowance,"loading-text":s.loadingSwap?0===s.activeTab?e.$t("buying"):e.$t("selling"):e.$t("quoting"),color:l.swapButtonColor,disabled:(null===(_=l.priceImpactV)||void 0===_||null===(A=_.gt)||void 0===A?void 0:A.call(_,.4))||!l.checkAmount()||!s.fromAmount||!s.toAmount,"native-type":"submit"},{default:Object(n["withCtx"])((function(){var t,i,o,a,r;return[0===Number(l.fromToken.balance)||Number(l.fromToken.balance)<Number(Vt.fromAmount)||""===e.$store.state.currentAccount?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",S,Object(n["toDisplayString"])(l.checkAmountMessage()),1)):null!==(t=l.priceImpactV)&&void 0!==t&&null!==(i=t.gt)&&void 0!==i&&i.call(t,.4)?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",y,Object(n["toDisplayString"])(e.$t("priceImpactTooHigh")),1)):(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:2},[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(null!==(o=l.priceImpactV)&&void 0!==o&&null!==(a=o.gt)&&void 0!==a&&a.call(o,.1)?0===s.activeTab?e.$t("buyAnyway"):e.$t("sellAnyway"):0===s.activeTab?e.$t("buy"):e.$t("sell"))+" "+Object(n["toDisplayString"])((null===(r=s.token1)||void 0===r?void 0:r.symbol)||""),1),l.taxStr?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",N,Object(n["toDisplayString"])(l.taxStr),1)):Object(n["createCommentVNode"])("",!0)],64))]})),_:1},8,["loading","loading-text","color","disabled"]))]})),_:1},8,["onSubmit"]),s.isTaxHigh?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",$,Object(n["toDisplayString"])(e.$t("taxTooHigh")),1)):Object(n["createCommentVNode"])("",!0),s.isCannotSellAll?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",x,Object(n["toDisplayString"])(e.$t("cannotSellAll")),1)):Object(n["createCommentVNode"])("",!0),s.isHotToken?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",_,Object(n["toDisplayString"])(e.$t("hotTokenTips")),1)):Object(n["createCommentVNode"])("",!0)],64)):Object(n["createCommentVNode"])("",!0),0===s.selected||1===this.selected||3===this.selected?(Object(n["openBlock"])(),Object(n["createBlock"])(Ft,{key:1,class:"swap-form",onSubmit:l.onLimitSubmit,style:{"--van-cell-horizontal-padding":"0","--van-cell-vertical-padding":"0"}},{default:Object(n["withCtx"])((function(){var i,o,a,r,c,u,d,m,p,h;return[Object(n["createElementVNode"])("div",A,[Object(n["createElementVNode"])("div",V,[Object(n["createVNode"])(It,{tokens:l.swapTokens,token:s.limitToken1,"onUpdate:token":[t[13]||(t[13]=function(e){return s.limitToken1=e}),l.handleSelectLimitToken1],chain:e.$store.getters.netId||(null===(i=e.$route.params)||void 0===i||null===(o=i.id)||void 0===o||null===(a=o.split)||void 0===a||null===(r=a.call(o,"-"))||void 0===r?void 0:r[1])||s.limitToken1.chain||""},null,8,["tokens","token","chain","onUpdate:token"]),C,Object(n["createElementVNode"])("div",E,Object(n["toDisplayString"])(e.$t("balance"))+": "+Object(n["toDisplayString"])(e.$f.formatNumber2((null===(c=s.limitToken1)||void 0===c?void 0:c.balance)||0)),1),1===s.activeTab?(Object(n["openBlock"])(),Object(n["createBlock"])(Pt,{key:0,plain:"",type:"primary",color:"#999",round:"",size:"mini",class:"max-btn",onClick:t[14]||(t[14]=Object(n["withModifiers"])((function(e){return l.handlePercentChange1(100)}),["stop"]))},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("max")),1)]})),_:1})):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",B,[Object(n["createVNode"])(Lt,{modelValue:s.limitAmount1,"onUpdate:modelValue":[t[15]||(t[15]=function(e){return s.limitAmount1=e}),l.watchLimitAmount1],placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number",onFocus:t[16]||(t[16]=function(t){return e.$refs.percentStep1.handleClick(0,!0)})},null,8,["modelValue","onUpdate:modelValue"])])]),I,Object(n["createElementVNode"])("div",P,[Object(n["createElementVNode"])("div",L,[Object(n["createVNode"])(It,{tokens:l.swapTokens,token:s.limitToken2,"onUpdate:token":[t[17]||(t[17]=function(e){return s.limitToken2=e}),l.handleSelectLimitToken2],chain:e.$store.getters.netId||(null===(u=e.$route.params)||void 0===u||null===(d=u.id)||void 0===d||null===(m=d.split)||void 0===m||null===(p=m.call(d,"-"))||void 0===p?void 0:p[1])||s.limitToken2.chain||""},null,8,["tokens","token","chain","onUpdate:token"]),D,Object(n["createElementVNode"])("div",F,Object(n["toDisplayString"])(e.$t("balance"))+": "+Object(n["toDisplayString"])(e.$f.formatNumber2((null===(h=s.limitToken2)||void 0===h?void 0:h.balance)||0)),1),0===s.activeTab?(Object(n["openBlock"])(),Object(n["createBlock"])(Pt,{key:0,plain:"",type:"primary",color:"#999",round:"",size:"mini",class:"max-btn",onClick:t[18]||(t[18]=Object(n["withModifiers"])((function(e){return l.handlePercentChange1(100)}),["stop"]))},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("max")),1)]})),_:1})):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",G,[Object(n["createVNode"])(Lt,{modelValue:s.limitAmount2,"onUpdate:modelValue":[t[19]||(t[19]=function(e){return s.limitAmount2=e}),l.watchLimitAmount2],placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number",onFocus:t[20]||(t[20]=function(t){return e.$refs.percentStep1.handleClick(0,!0)})},null,8,["modelValue","onUpdate:modelValue"])])]),Object(n["createVNode"])(Dt,{ref:"percentStep1",onChange:l.handlePercentChange1,activeColor:l.limitButtonColor},null,8,["onChange","activeColor"]),1===s.selected?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",R,Object(n["toDisplayString"])(e.$t("triggerPrice"))+"("+Object(n["toDisplayString"])(s.limitToken1.symbol||"")+")",1)):Object(n["createCommentVNode"])("",!0),1===s.selected?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",U,[Object(n["createElementVNode"])("button",{class:"limit-price-icon",type:"button",onClick:t[21]||(t[21]=Object(n["withModifiers"])((function(){return l.minusTriggerPrice&&l.minusTriggerPrice.apply(l,arguments)}),["stop"])),disabled:!s.triggerPrice},[Object(n["createVNode"])(Gt,{name:"minus"})],8,M),Object(n["createVNode"])(Lt,{modelValue:s.triggerPrice,"onUpdate:modelValue":t[22]||(t[22]=function(e){return s.triggerPrice=e}),placeholder:"0.0",label:"$",type:"number","input-align":"left","label-align":"right","label-width":"0.2rem",clearable:"",class:"input-number",border:!1,style:{"--van-field-label-margin-right":"0.1rem"}},null,8,["modelValue"]),Object(n["createElementVNode"])("button",{class:"limit-price-icon",type:"button",onClick:t[23]||(t[23]=Object(n["withModifiers"])((function(){return l.addTriggerPrice&&l.addTriggerPrice.apply(l,arguments)}),["stop"])),disabled:!s.triggerPrice},[Object(n["createVNode"])(Gt,{name:"plus"})],8,Q)])):Object(n["createCommentVNode"])("",!0),1===s.selected||0===s.selected?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:2},[Object(n["createElementVNode"])("div",z,Object(n["toDisplayString"])(e.$t("delegatePrice"))+"("+Object(n["toDisplayString"])(s.limitToken1.symbol||"")+")",1),Object(n["createElementVNode"])("div",q,[Object(n["createElementVNode"])("button",{class:"limit-price-icon",type:"button",onClick:t[24]||(t[24]=Object(n["withModifiers"])((function(){return l.minusLimitPrice&&l.minusLimitPrice.apply(l,arguments)}),["stop"])),disabled:!s.limitPrice},[Object(n["createVNode"])(Gt,{name:"minus"})],8,H),Object(n["createVNode"])(Lt,{modelValue:s.limitPrice,"onUpdate:modelValue":[t[25]||(t[25]=function(e){return s.limitPrice=e}),l.watchLimitPrice],placeholder:"0.0",label:"$",type:"number","input-align":"left","label-align":"right","label-width":"0.2rem",clearable:"",class:"input-number",border:!1,style:{"--van-field-label-margin-right":"0.1rem"}},null,8,["modelValue","onUpdate:modelValue"]),Object(n["createElementVNode"])("button",{class:"limit-price-icon",type:"button",onClick:t[26]||(t[26]=Object(n["withModifiers"])((function(){return l.addLimitPrice&&l.addLimitPrice.apply(l,arguments)}),["stop"])),disabled:!s.limitPrice},[Object(n["createVNode"])(Gt,{name:"plus"})],8,W)])],64)):Object(n["createCommentVNode"])("",!0),l.isLimitApprove&&!s.loadingLimitAllowance||3===s.selected?(Object(n["openBlock"])(),Object(n["createBlock"])(Pt,{key:4,class:"submit-btn",block:"",loading:s.loadingLimit||s.limitQuoteLoading,"loading-text":s.limitQuoteLoading?e.$t("quoting"):s.loadingLimit?0===s.activeTab?e.$t("buying"):e.$t("selling"):e.$t("quoting"),color:l.limitButtonColor,disabled:!l.checkLimitAmount()||!s.limitAmount1||!s.limitAmount2||s.loadingLimitAllowance,"native-type":"submit"},{default:Object(n["withCtx"])((function(){var t;return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(l.checkLimitAmountMessage()||(0===s.activeTab?e.$t("buy"):e.$t("sell"))+" "+((null===(t=s.limitToken1)||void 0===t?void 0:t.symbol)||"")),1)]})),_:1},8,["loading","loading-text","color","disabled"])):(Object(n["openBlock"])(),Object(n["createBlock"])(Pt,{key:3,class:"submit-btn",block:"",color:l.limitButtonColor,"native-type":"submit","loading-text":s.loadingLimitAllowance?e.$t("checkingAllowance"):s.quoteLimitLoading?e.$t("quoting"):s.loadingLimitApprove?e.$t("approve"):"",disabled:!l.checkLimitAmount(),loading:s.loadingLimitApprove||s.loadingLimit||s.loadingLimitAllowance},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(l.checkLimitAmountMessage()||e.$t("approve")),1)]})),_:1},8,["color","loading-text","disabled","loading"]))]})),_:1},8,["onSubmit"])):Object(n["createCommentVNode"])("",!0)],512),J,Object(n["createElementVNode"])("div",{class:"swap-content_right",style:Object(n["normalizeStyle"])({"max-height":s.height/50+"rem"})},[Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("div",K,[Object(n["createElementVNode"])("div",null," $"+Object(n["toDisplayString"])(e.$f.formatNumber2((null===(r=s.baseToken)||void 0===r||null===(Ye=r.token)||void 0===Ye?void 0:Ye.current_price_usd)||0)),1),Object(n["createElementVNode"])("div",{style:Object(n["normalizeStyle"])({color:(null===(Xe=s.baseToken)||void 0===Xe||null===(Ze=Xe.token)||void 0===Ze?void 0:Ze.price_change)<0?"var(--downColor)":"var(--upColor)"})},[(null===(et=s.baseToken)||void 0===et||null===(tt=et.token)||void 0===tt?void 0:tt.price_change)>0?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:0},[Y],64)):Object(n["createCommentVNode"])("",!0),Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$f.formatNumber2((null===(it=s.baseToken)||void 0===it||null===(nt=it.token)||void 0===nt?void 0:nt.price_change)||0,2))+"% ",1)],4)])),[[ai,null===(ot=s.baseToken)||void 0===ot||null===(at=ot.token)||void 0===at?void 0:at.current_price_usd,"animation-bg"]]),Object(n["createVNode"])(Rt,{dataX:s.dataX,dataY:s.dataY},null,8,["dataX","dataY"]),Object(n["createElementVNode"])("table",X,[Object(n["createElementVNode"])("tr",null,[Object(n["createElementVNode"])("th",null,Object(n["toDisplayString"])(e.$t("pool1")),1),Object(n["createElementVNode"])("th",null,[l.tokenInfo.token&&l.tokenInfo.chain&&s.openLp&&l.isShow?(Object(n["openBlock"])(),Object(n["createBlock"])(Pt,{key:0,icon:"plus",type:"primary",plain:"",size:"small",style:{"--van-padding-base":"0","min-width":"0.8rem",height:"0.4rem"},onClick:Object(n["withModifiers"])(l.goLiquidity,["stop"])},{default:Object(n["withCtx"])((function(){return[Z]})),_:1},8,["onClick"])):Object(n["createCommentVNode"])("",!0)])]),(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(null===(st=s.baseToken)||void 0===st||null===(lt=st.pairs)||void 0===lt?void 0:lt.slice(0,2),(function(t,i){return Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:i},[Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(t.target_token===t.token0_address?t.token0_symbol:t.token1_symbol),1),Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(t.target_token===t.token0_address?t.token1_symbol:t.token0_symbol),1)]),Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(e.$f.formatNumber2(t.target_token===t.token0_address?t.reserve0:t.reserve1)),1),Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(e.$f.formatNumber2(t.target_token===t.token0_address?t.reserve1:t.reserve0)),1)])])),[[ai,t.target_token===t.token0_address?t.token0_price_usd:t.token1_price_usd,"animation-bg"]])})),128)),(null===(rt=s.baseToken)||void 0===rt||null===(ct=rt.pairs)||void 0===ct?void 0:ct.length)>2&&s.isPairShowMore?(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],{key:0},Object(n["renderList"])(null===(ut=s.baseToken)||void 0===ut||null===(dt=ut.pairs)||void 0===dt?void 0:dt.slice(2),(function(t,i){return Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:i},[Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(t.target_token===t.token0_address?t.token0_symbol:t.token1_symbol),1),Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(t.target_token===t.token0_address?t.token1_symbol:t.token0_symbol),1)]),Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(e.$f.formatNumber2(t.target_token===t.token0_address?t.reserve0:t.reserve1)),1),Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(e.$f.formatNumber2(t.target_token===t.token0_address?t.reserve1:t.reserve0)),1)])])),[[ai,t.target_token===t.token0_address?t.token0_price_usd:t.token1_price_usd,"animation-bg"]])})),128)):Object(n["createCommentVNode"])("",!0)]),Object(n["withDirectives"])(Object(n["createElementVNode"])("div",{class:"btn-more",onClick:t[27]||(t[27]=Object(n["withModifiers"])((function(e){return s.isPairShowMore=!0}),["stop"]))},[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("viewMore")),1),Object(n["createVNode"])(Gt,{name:"arrow-down"})],512),[[n["vShow"],!s.isPairShowMore&&(null===(mt=s.baseToken)||void 0===mt||null===(pt=mt.pairs)||void 0===pt?void 0:pt.length)>2]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("div",{class:"btn-more",onClick:t[28]||(t[28]=Object(n["withModifiers"])((function(e){return s.isPairShowMore=!1}),["stop"]))},[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("putAway")),1),Object(n["createVNode"])(Gt,{name:"arrow-up"})],512),[[n["vShow"],s.isPairShowMore&&(null===(ht=s.baseToken)||void 0===ht||null===(bt=ht.pairs)||void 0===bt?void 0:bt.length)>2]])],4)]),2===s.selected?(Object(n["openBlock"])(),Object(n["createElementBlock"])("ul",ee,[Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("div",te,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("slippage")),1),Object(n["createElementVNode"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:t[29]||(t[29]=Object(n["withModifiers"])((function(t){return l.alertTips(e.$t("slippage"),e.$t("minimumReceivedTips"))}),["stop"]))})]),Object(n["createVNode"])(Ut,{swapMode:s.customSwapMode,"onUpdate:swapMode":t[30]||(t[30]=function(e){return s.customSwapMode=e}),autoSwapMode:s.autoSwapMode,slippage:s.customSlippage,"onUpdate:slippage":t[31]||(t[31]=function(e){return s.customSlippage=e}),autoSlippage:s.autoSlippageValue},null,8,["swapMode","autoSwapMode","slippage","autoSlippage"])]),Object(n["withDirectives"])(Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("div",ie,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("estimatedAveragePrice")),1)]),Object(n["createElementVNode"])("div",ne,[Object(n["createElementVNode"])("span",null,"$"+Object(n["toDisplayString"])(l.getAvgPrice()),1)])],512),[[n["vShow"],s.fromAmount&&s.toAmount]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("div",oe,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("priceImpact")),1),Object(n["createElementVNode"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:t[32]||(t[32]=Object(n["withModifiers"])((function(t){return l.alertTips(e.$t("priceImpact"),e.$t("priceImpactTips"))}),["stop"]))})]),Object(n["createElementVNode"])("div",{style:Object(n["normalizeStyle"])({color:l.priceImpactColor})},Object(n["toDisplayString"])(l.priceImpact)+Object(n["toDisplayString"])(null!==(vt=l.priceImpactV)&&void 0!==vt&&null!==(ft=vt.gt)&&void 0!==ft&&ft.call(vt,.05)?"(".concat(e.$t("excessivePriceImpact"),")"):""),5)],512),[[n["vShow"],s.fromAmount&&s.toAmount]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("div",ae,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("tokenRoute")),1),Object(n["createElementVNode"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:t[33]||(t[33]=Object(n["withModifiers"])((function(t){return l.alertTips(e.$t("tokenRoute"),e.$t("tokenRouteTips"))}),["stop"]))})]),"solana"===l.chain?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",se,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])([l.fromToken,l.toToken],(function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:t},[0!==t?(Object(n["openBlock"])(),Object(n["createElementBlock"])("img",le)):Object(n["createCommentVNode"])("",!0),e.symbol?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",re,Object(n["toDisplayString"])(e.symbol),1)):Object(n["createCommentVNode"])("",!0)],64)})),128))])):1===(null===(gt=s.swapQuoteInfo)||void 0===gt?void 0:gt.toWrapper)||2===(null===(kt=s.swapQuoteInfo)||void 0===kt?void 0:kt.toWrapper)?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",ce,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(s.swapRouterPath,(function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:t},[0!==t?(Object(n["openBlock"])(),Object(n["createElementBlock"])("img",ue)):Object(n["createCommentVNode"])("",!0),e.symbol?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",de,Object(n["toDisplayString"])(e.symbol),1)):Object(n["createCommentVNode"])("",!0)],64)})),128))])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:2,class:"path-list clickable",onClick:t[34]||(t[34]=Object(n["withModifiers"])((function(e){return s.dialogListRouterVisible=!0}),["stop","prevent"]))},[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(s.swapRouterPath,(function(t,o){return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:o},[t.symbol?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",me,Object(n["toDisplayString"])(t.symbol),1)):Object(n["createCommentVNode"])("",!0),t.nextAmm&&"unknown"!==t.nextAmm?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",pe,[Object(n["createVNode"])(Mt,{class:"icon-amm-logo","lazy-load":"","show-loading":"",round:"",src:"".concat(e.$store.state.s3BaseUrl,"swap/").concat(t.nextAmm,".jpeg"),"error-icon":i("aeccf")},null,8,["src","error-icon"]),he])):Object(n["createCommentVNode"])("",!0)],64)})),128)),s.listRouter.length>0?(Object(n["openBlock"])(),Object(n["createElementBlock"])("i",be)):Object(n["createCommentVNode"])("",!0)]))],512),[[n["vShow"],s.fromAmount&&s.toAmount]]),"solana"!==l.chain?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",ve,[Object(n["createElementVNode"])("div",fe,Object(n["toDisplayString"])(e.$t("estimatedGas")),1),Object(n["createElementVNode"])("div",ge,[Object(n["createElementVNode"])("span",null,"â‰ˆ "+Object(n["toDisplayString"])(l.estimatedFee),1),"bsc"===e.$store.getters.netId?(Object(n["openBlock"])(),Object(n["createBlock"])(Qt,{key:0,class:"ml-5",standardGasPrice:s.gasPrice,gas:this.swapInfo.gasValue,nativePrice:s.nativePrice,onUpdateGasPrice:l.updateGasPrice},null,8,["standardGasPrice","gas","nativePrice","onUpdateGasPrice"])):Object(n["createCommentVNode"])("",!0)])])):Object(n["createCommentVNode"])("",!0)])):Object(n["createCommentVNode"])("",!0),0===s.selected||1===s.selected||3===s.selected?(Object(n["openBlock"])(),Object(n["createElementBlock"])("ul",ke,[Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("div",Oe,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("slippage")),1),Object(n["createElementVNode"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:t[35]||(t[35]=Object(n["withModifiers"])((function(t){return l.alertTips(e.$t("slippage"),e.$t("minimumReceivedTips"))}),["stop"]))})]),0===s.selected||1===s.selected?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",we,[Object(n["createElementVNode"])("span",je,Object(n["toDisplayString"])(s.limitSlippage)+"%",1),Object(n["createVNode"])(zt,{slippage:s.limitSlippage,"onUpdate:slippage":t[36]||(t[36]=function(e){return s.limitSlippage=e}),icon:1,onOnSubmit:l.onSubmitLimitSlippage},null,8,["slippage","onOnSubmit"])])):3===s.selected?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Te,[Object(n["createElementVNode"])("span",Se,Object(n["toDisplayString"])(s.noGasSlippage)+"%",1),Object(n["createVNode"])(zt,{slippage:s.noGasSlippage,"onUpdate:slippage":t[37]||(t[37]=function(e){return s.noGasSlippage=e}),icon:1,min:5,slippageList:["5","6","7"],onOnSubmit:l.onSubmitNoGasSlippage},null,8,["slippage","onOnSubmit"])])):Object(n["createCommentVNode"])("",!0)]),0===s.selected||1===s.selected?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",ye,[Object(n["createElementVNode"])("div",Ne,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("limitExpiredTime")),1)]),Object(n["createElementVNode"])("div",$e,Object(n["toDisplayString"])(s.LimitExpiredDays)+" "+Object(n["toDisplayString"])(e.$t("days")),1)])):Object(n["createCommentVNode"])("",!0)])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("div",xe,[Object(n["createElementVNode"])("div",_e,[Object(n["createVNode"])(Ht,{active:s.tabActive1,"onUpdate:active":t[38]||(t[38]=function(e){return s.tabActive1=e}),shrink:"",color:"#558BED","title-active-color":"#333333","title-inactive-color":"#999999",style:{"--van-tabs-nav-background-color":"#fff"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(qt,{name:"swap",title:e.$t("historyExchange")},null,8,["title"]),s.isSupportNoGas?(Object(n["openBlock"])(),Object(n["createBlock"])(qt,{key:0,name:"noGas",title:e.$t("historyNoGas")},null,8,["title"])):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(qt,{name:"limit",title:e.$t("historyLimitOrder")},null,8,["title"])]})),_:1},8,["active"]),Ae,Object(n["createVNode"])(Wt,{modelValue:s.isCurrentToken,"onUpdate:modelValue":t[39]||(t[39]=function(e){return s.isCurrentToken=e}),"icon-size":"0.32rem",style:{"--van-checkbox-size":"1.1","--van-checkbox-label-margin":"0.1rem"}},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("currentToken")),1)]})),_:1},8,["modelValue"]),"limit"===s.tabActive1?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:0},[s.loadingGetLimitOrder?(Object(n["openBlock"])(),Object(n["createBlock"])(Jt,{key:0,size:"0.4rem",style:{"margin-left":"0.36rem"}})):(Object(n["openBlock"])(),Object(n["createElementBlock"])("i",{key:1,class:"iconfont icon-shuaxin",onClick:t[40]||(t[40]=Object(n["withModifiers"])((function(){return l.getLimitOrder&&l.getLimitOrder.apply(l,arguments)}),["stop"]))}))],64)):Object(n["createCommentVNode"])("",!0)]),"swap"===s.tabActive1?(Object(n["openBlock"])(),Object(n["createElementBlock"])("ul",Ve,[(null===(Ot=l.txs)||void 0===Ot?void 0:Ot.length)>0?(Object(n["openBlock"])(),Object(n["createBlock"])(Xt,{key:0,items:l.txs,"min-item-size":200,"key-field":"id","page-mode":"",buffer:1e3,class:"scroller"},{default:Object(n["withCtx"])((function(e){var t=e.item,i=e.index,o=e.active;return[Object(n["createVNode"])(Yt,{item:t,active:o,"data-index":i},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(Kt,{item:t},null,8,["item"])]})),_:2},1032,["item","active","data-index"])]})),_:1},8,["items"])):Object(n["createCommentVNode"])("",!0),Object(n["withDirectives"])(Object(n["createVNode"])(Zt,{class:"empty",image:e.emptyNoDataLight,description:e.$t("empty")},null,8,["image","description"]),[[n["vShow"],l.txs&&0===l.txs.length]])])):Object(n["createCommentVNode"])("",!0),"limit"===s.tabActive1?(Object(n["openBlock"])(),Object(n["createElementBlock"])("ul",Ce,[(null===(wt=l.filterLimitOrders)||void 0===wt?void 0:wt.length)>0?(Object(n["openBlock"])(),Object(n["createBlock"])(Xt,{key:0,items:l.filterLimitOrders,"min-item-size":200,"key-field":"id","page-mode":"",buffer:1e3,class:"scroller"},{default:Object(n["withCtx"])((function(e){var t=e.item,i=e.index,o=e.active;return[Object(n["createVNode"])(Yt,{item:t,active:o,"data-index":i},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(ei,{item:t,onRefresh:l.refreshLimit},null,8,["item","onRefresh"])]})),_:2},1032,["item","active","data-index"])]})),_:1},8,["items"])):Object(n["createCommentVNode"])("",!0),Object(n["withDirectives"])(Object(n["createVNode"])(Zt,{class:"empty",image:e.emptyNoDataLight,description:e.$t("empty")},null,8,["image","description"]),[[n["vShow"],l.filterLimitOrders&&0===l.filterLimitOrders.length]])])):Object(n["createCommentVNode"])("",!0),"noGas"===s.tabActive1?(Object(n["openBlock"])(),Object(n["createElementBlock"])("ul",Ee,[(null===(jt=l.filterNoGasTxList)||void 0===jt?void 0:jt.length)>0?(Object(n["openBlock"])(),Object(n["createBlock"])(Xt,{key:0,items:l.filterNoGasTxList,"min-item-size":200,"key-field":"id","page-mode":"",buffer:1e3,class:"scroller"},{default:Object(n["withCtx"])((function(e){var t=e.item,i=e.index,o=e.active;return[Object(n["createVNode"])(Yt,{item:t,active:o,"data-index":i},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(ti,{item:t,onRefresh:l.getNoGasList},null,8,["item","onRefresh"])]})),_:2},1032,["item","active","data-index"])]})),_:1},8,["items"])):Object(n["createCommentVNode"])("",!0),Object(n["withDirectives"])(Object(n["createVNode"])(Zt,{class:"empty",image:e.emptyNoDataLight,description:e.$t("empty")},null,8,["image","description"]),[[n["vShow"],l.filterNoGasTxList&&0===l.filterNoGasTxList.length&&!s.loadingGetNoGasList]])])):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",Be,[Object(n["createElementVNode"])("div",{class:"section-audit",onClick:t[41]||(t[41]=Object(n["withModifiers"])((function(){return l.goAudit&&l.goAudit.apply(l,arguments)}),["stop"]))},[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("securityAudit"))+": ",1),Ie])])],4),Object(n["createVNode"])(ii,{visible:s.dialogVisibleSwap,"onUpdate:visible":t[42]||(t[42]=function(e){return s.dialogVisibleSwap=e}),swapInfo:s.swapInfo,slippage:l.slippage,onSubmit:l.submitSwap,loading:s.loadingConfirmSwap,chain:e.$store.getters.netId||(null===(Tt=e.$route.params)||void 0===Tt||null===(St=Tt.id)||void 0===St||null===(yt=St.split)||void 0===yt||null===(Nt=yt.call(St,"-"))||void 0===Nt?void 0:Nt[1])||"",nativePrice:s.nativePrice,gasPrice:l.customGasPrice},null,8,["visible","swapInfo","slippage","onSubmit","loading","chain","nativePrice","gasPrice"]),Object(n["createVNode"])(ni,{visible:s.dialogVisibleLimit,"onUpdate:visible":t[43]||(t[43]=function(e){return s.dialogVisibleLimit=e}),limitInfo:s.limitInfo,onSubmit:l.submitLimitOrder,loading:s.loadingConfirmLimit,chain:e.$store.getters.netId||(null===($t=e.$route.params)||void 0===$t||null===(xt=$t.id)||void 0===xt||null===(_t=xt.split)||void 0===_t||null===(At=_t.call(xt,"-"))||void 0===At?void 0:At[1])||"",limitGasU:s.limitGasU},null,8,["visible","limitInfo","onSubmit","loading","chain","limitGasU"]),Object(n["createVNode"])(oi,{show:s.dialogListRouterVisible,"onUpdate:show":t[44]||(t[44]=function(e){return s.dialogListRouterVisible=e}),title:e.$t("selectRouter"),style:{height:"60%","--van-popup-background-color":"#fff"}},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("ul",Pe,[Object(n["createElementVNode"])("li",Le,[Object(n["createElementVNode"])("span",De,Object(n["toDisplayString"])(e.$t("router")),1),Object(n["createElementVNode"])("span",Fe,Object(n["toDisplayString"])(s.isAmount?e.$t("expectedAmount"):e.$t("expectedPay")),1),Object(n["createElementVNode"])("span",Ge,Object(n["toDisplayString"])(e.$t("priceImpact")),1),Re]),Object(n["withDirectives"])(Object(n["createVNode"])(Zt,{description:e.$t("emptyData"),class:"empty"},null,8,["description"]),[[n["vShow"],s.listRouter&&0===s.listRouter.length]]),(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(s.listRouter,(function(t,o){return Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:o,class:"token-item",onClick:Object(n["withModifiers"])((function(e){return l.getSelectedRouter(o)}),["stop"])},[Object(n["createElementVNode"])("div",Me,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(t.path,(function(t,o){return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:o},[t.symbol?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",Qe,Object(n["toDisplayString"])(t.symbol),1)):Object(n["createCommentVNode"])("",!0),t.nextAmm&&"unknown"!==t.nextAmm?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",ze,[Object(n["createVNode"])(Mt,{class:"icon-amm-logo","lazy-load":"","show-loading":"",round:"",src:"".concat(e.$store.state.s3BaseUrl,"swap/").concat(t.nextAmm,".jpeg"),"error-icon":i("aeccf")},null,8,["src","error-icon"]),qe])):Object(n["createCommentVNode"])("",!0)],64)})),128)),0===o?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",He,Object(n["toDisplayString"])(e.$t("best")),1)):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("span",We,Object(n["toDisplayString"])(e.$f.formatNumber2(t.amount)),1),t.priceImpact<10?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:0,class:"right-label flex-1",style:Object(n["normalizeStyle"])({color:l.formatPriceImpactColor(t.priceImpact)})},[Number(t.priceImpact)<.01?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:0},[Je],64)):(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:1},[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$f.formatNumber2(t.priceImpact,2))+"% ",1)],64))],4)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:1,class:"right-label flex-1",style:Object(n["normalizeStyle"])({color:l.formatPriceImpactColor(t.priceImpact)})},[Number(t.priceImpact)>40?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:0},[Ke],64)):(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:1},[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$f.formatNumber2(t.priceImpact,2))+"% ",1)],64))],4)),s.selectedRouterIndex===o?(Object(n["openBlock"])(),Object(n["createBlock"])(Gt,{key:2,size:"0.32rem",color:"#558BED",name:"success"})):(Object(n["openBlock"])(),Object(n["createBlock"])(Gt,{key:3,style:{opacity:"0"},size:"0.32rem",color:"#558BED",name:"success"}))],8,Ue)})),128))])]})),_:1},8,["show","title"])],64)}var Xe=i("fc11"),Ze=i("c964"),et=i("f3f3"),tt=i("d0ff"),it=i("d0af"),nt=(i("96cf"),i("7db0"),i("d3b7"),i("2ca0"),i("b680"),i("4de4"),i("159b"),i("25f0"),i("d81d"),i("c740"),i("5319"),i("466d"),i("4d63"),i("c607"),i("2c3e"),i("4e82"),i("00b4"),i("3ca3"),i("ddb0"),i("e9c4"),i("caad"),i("2532"),i("b64b"),i("a15b"),i("85b6")),ot=i("57c9"),at=i("9587"),st=function(e){return Object(n["pushScopeId"])("data-v-5a559431"),e=e(),Object(n["popScopeId"])(),e},lt={class:"flex items-center"},rt={class:"label mr-20"},ct={key:0,class:"token-container"},ut={class:"icon-token-container mr-5"},dt=["src"],mt={class:"mr-5"},pt=st((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),ht={class:"flex items-center mt-10"},bt={class:"label mr-20"},vt={key:0,class:"token-container"},ft={class:"icon-token-container mr-5"},gt=["src"],kt={class:"mr-5"},Ot={class:"flex items-center justify-between mt-10"},wt={class:"label mr-20"},jt=st((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)}));function Tt(e,t,i,o,a,s){var l,r,c,u=Object(n["resolveComponent"])("van-image"),d=Object(n["resolveComponent"])("van-loading");return Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{class:"tx-li-item van-hairline--bottom clickable",onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(){return s.goLink&&s.goLink.apply(s,arguments)}),["stop"]))},[Object(n["createElementVNode"])("div",lt,[Object(n["createElementVNode"])("span",rt,Object(n["toDisplayString"])(e.$t("from")),1),i.item.from_token?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",ct,[Object(n["createElementVNode"])("div",ut,[Object(n["createVNode"])(u,{round:"",width:"0.4rem",height:"0.4rem","icon-size":"0.4rem","lazy-load":"","show-loading":"",src:e.$f.formatIcon(i.item.from_token+"-"+i.item.chain),"error-icon":a.defaultIcon},null,8,["src","error-icon"]),Object(n["createElementVNode"])("img",{class:"icon-svg icon-network",src:"".concat(e.$store.state.s3BaseUrl,"chain/").concat(i.item.chain,".png"),alt:"",srcset:""},null,8,dt)]),Object(n["createElementVNode"])("span",mt,Object(n["toDisplayString"])(e.$f.formatNumber2(s.formatUnits(i.item.from_amount,i.item.from_token_decimals))),1),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(i.item.from_token_symbol||""),1)])):Object(n["createCommentVNode"])("",!0),pt]),Object(n["createElementVNode"])("div",ht,[Object(n["createElementVNode"])("span",bt,Object(n["toDisplayString"])(e.$t("to")),1),i.item.to_token?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",vt,[Object(n["createElementVNode"])("div",ft,[Object(n["createVNode"])(u,{round:"",width:"0.4rem",height:"0.4rem","icon-size":"0.4rem","lazy-load":"","show-loading":"",src:e.$f.formatIcon(i.item.to_token+"-"+i.item.chain),"error-icon":a.defaultIcon},null,8,["src","error-icon"]),Object(n["createElementVNode"])("img",{class:"icon-svg icon-network",src:"".concat(e.$store.state.s3BaseUrl,"chain/").concat(i.item.chain,".png"),alt:"",srcset:""},null,8,gt)]),Object(n["createElementVNode"])("span",kt,Object(n["toDisplayString"])(e.$f.formatNumber2(s.formatUnits(i.item.to_amount,i.item.to_token_decimals))),1),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])((null===(l=i.item)||void 0===l?void 0:l.to_token_symbol)||""),1)])):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",Ot,[Object(n["createElementVNode"])("span",wt,Object(n["toDisplayString"])(e.$f.formatDate(i.item.created_at)),1),1===i.item.status||2===i.item.status?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:0,class:"status-txt",style:Object(n["normalizeStyle"])({color:s.formatStatusColor(i.item.status)})},Object(n["toDisplayString"])(s.formatStatus(i.item.status)),5)):(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:1},[jt,0===(null===(r=i.item)||void 0===r?void 0:r.status)||-1===(null===(c=i.item)||void 0===c?void 0:c.status)?(Object(n["openBlock"])(),Object(n["createBlock"])(d,{key:0,size:"0.32rem",color:"#3F80F7","text-size":"0.24rem"},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("pending")),1)]})),_:1})):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:1,class:"status-txt",style:Object(n["normalizeStyle"])({color:s.formatStatusColor(i.item.status)})},Object(n["toDisplayString"])(s.formatStatus(i.item.status)),5))],64))])])}var St=i("6779"),yt=i("aeccf"),Nt=i.n(yt),$t={name:"NoGasTxItem",props:{item:Object},emits:["refresh"],data:function(){return{defaultIcon:Nt.a,loading:!1}},methods:{formatUnits:St["utils"].formatUnits,formatStatus:function(e){var t,i={0:"",1:this.$t("cancelled"),2:this.$t("completed"),3:this.$t("unknownError1"),7:this.$t("unknownError1"),4:this.$t("notEnoughBalance"),5:this.$t("insufficientSlippage1"),8:this.$t("insufficientSlippage1"),6:this.$t("transferFailed"),10:this.$t("fail1")+"(".concat(this.$t("nonceError"),")"),11:this.$t("fail1")+"(".concat(this.$t("chainError"),")"),12:this.$t("fail1")+"(".concat(this.$t("signatureError"),")"),13:this.$t("fail1")+"(".concat(this.$t("approveGasPriceLow"),")"),15:this.$t("fail1")+"(".concat(this.$t("gasLimitHigh"),")"),16:this.$t("fail1")+"(".concat(this.$t("swapTokenRiskHigh"),")"),"-1":""};return null!==(t=i[e])&&void 0!==t?t:e},formatStatusColor:function(e){return 1===e||10===e||11===e||12===e?"#999999":2===e?"#12B886":0===e?"#3F80F7":"#FF0000"},goLink:function(){var e=this.$f.formatExplorerUrl(this.item.chain,this.item.executed_tx_hash,"tx");e&&this.item.executed_tx_hash&&this.$f.openBrowser(e)}}},xt=(i("959c"),i("6b0d")),_t=i.n(xt);const At=_t()($t,[["render",Tt],["__scopeId","data-v-5a559431"]]);var Vt=At,Ct=function(e){return Object(n["pushScopeId"])("data-v-55947970"),e=e(),Object(n["popScopeId"])(),e},Et={class:"select-box"},Bt={key:0,class:"token-container"},It={key:1},Pt=Ct((function(){return Object(n["createElementVNode"])("i",{class:"iconfont icon-collapse-down"},null,-1)})),Lt={class:"rules-content"},Dt={class:"search-bar",action:"/"},Ft={key:0,class:"pop-title"},Gt={style:{background:"#fff"}},Rt=["onClick"],Ut={class:"main"},Mt={key:0,class:"risk-status high"},Qt={key:0,class:"minor"},zt=Ct((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),qt={class:"right-label"},Ht=Ct((function(){return Object(n["createElementVNode"])("br",null,null,-1)})),Wt={key:0,class:"minor"};function Jt(e,t,o,a,s,l){var r=Object(n["resolveComponent"])("van-image"),c=Object(n["resolveComponent"])("van-search"),u=Object(n["resolveComponent"])("van-empty"),d=Object(n["resolveComponent"])("van-icon"),m=Object(n["resolveComponent"])("DynamicScrollerItem"),p=Object(n["resolveComponent"])("DynamicScroller"),h=Object(n["resolveComponent"])("van-action-sheet");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Et,[Object(n["createElementVNode"])("button",{class:"select-container",type:"button",onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(e){return s.show=!0}),["stop"]))},[o.token.address||o.token.token?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Bt,[(Object(n["openBlock"])(),Object(n["createBlock"])(r,{key:o.token.logo_url||0,round:"",width:"0.32rem",height:"0.32rem","icon-size":"0.32rem",style:{"margin-right":"0.1rem"},"lazy-load":"","show-loading":"",src:o.token.logo_url?e.$f.formatIcon({logo_url:o.token.logo_url}):e.$f.formatIcon((o.token.token||o.token.address)+"-"+o.chain),"error-icon":i("aeccf")},null,8,["src","error-icon"])),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(o.token.symbol||""),1)])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",It,Object(n["toDisplayString"])(e.$t("pleaseSelectToken")),1)),Pt]),Object(n["createVNode"])(h,{show:s.show,"onUpdate:show":t[2]||(t[2]=function(e){return s.show=e}),title:e.$t("selectToken"),style:{height:"80vh","--van-popup-background-color":"#fff"},"lazy-render":!1},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",Lt,[Object(n["createElementVNode"])("form",Dt,[Object(n["createVNode"])(c,{modelValue:s.keyword,"onUpdate:modelValue":t[1]||(t[1]=function(e){return s.keyword=e}),modelModifiers:{trim:!0},background:"#fff",shape:"round",placeholder:e.$t("searchContractORName"),onSearch:l.onSearch,onCancel:l.onCancel},null,8,["modelValue","placeholder","onSearch","onCancel"])]),""!==s.keyword||o.isBalance?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Ft,Object(n["toDisplayString"])(e.$t("popularTokens")),1)),Object(n["createElementVNode"])("ul",Gt,[Object(n["withDirectives"])(Object(n["createVNode"])(u,{class:"empty",image:e.emptyNoDataLight,description:e.$t("empty")},null,8,["image","description"]),[[n["vShow"],s.searchTokens&&0===s.searchTokens.length&&!s.loading]]),Object(n["createVNode"])(p,{items:s.searchTokens,"min-item-size":30,"key-field":"address",class:"tokens"},{default:Object(n["withCtx"])((function(t){var a=t.item,c=t.index,u=t.active;return[Object(n["createVNode"])(m,{item:a,active:u,"data-index":c},{default:Object(n["withCtx"])((function(){var t;return[Object(n["createElementVNode"])("li",{class:"token-item",onClick:Object(n["withModifiers"])((function(e){return l.handleSelectToken(a)}),["stop"])},[Object(n["createVNode"])(r,{class:"icon-token",round:"",width:"0.6rem",height:"0.6rem","icon-size":"0.6rem","lazy-load":"","show-loading":"",src:a.logo_url?e.$f.formatIcon({logo_url:a.logo_url}):s.errorIcon,"error-icon":i("aeccf")},null,8,["src","error-icon"]),Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("div",Ut,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(a.symbol),1),a.risk_score>60&&0===a.risk_level||a.risk_level<0?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",Mt,Object(n["toDisplayString"])(e.$t("highRisk")),1)):Object(n["createCommentVNode"])("",!0)]),(null!==a&&void 0!==a&&null!==(t=a.tags)&&void 0!==t&&t.includes("tokens")||null===a||void 0===a||!a.tags)&&a.address!==s.nativeToken?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Qt,Object(n["toDisplayString"])(a.address.slice(0,6)+"..."+a.address.slice(-6)),1)):Object(n["createCommentVNode"])("",!0)]),zt,Object(n["createElementVNode"])("div",qt,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(a.value?e.$f.formatNumber2(a.value):""),1),Ht,void 0!==a.price?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",Wt,"$"+Object(n["toDisplayString"])(a.value?e.$f.formatNumber2(a.value*a.price):""),1)):Object(n["createCommentVNode"])("",!0)]),a.address===(o.token.address||o.token.token)?(Object(n["openBlock"])(),Object(n["createBlock"])(d,{key:0,size:"0.32rem",color:"#558BED",name:"success"})):(Object(n["openBlock"])(),Object(n["createBlock"])(d,{key:1,style:{opacity:"0"},size:"0.32rem",color:"#558BED",name:"success"}))],8,Rt)]})),_:2},1032,["item","active","data-index"])]})),_:1},8,["items"])])])]})),_:1},8,["show","title"])])}i("841c");var Kt=i("365c"),Yt=i("c9d9"),Xt=i("aeccf"),Zt=null,ei={name:"SwapSelectToken",props:{tokens:Array,token:{type:Object,default:function(){return{address:"",chain:"",symbol:"",isbaseToken:!1}}},chain:String,hasNative:{type:Boolean,default:!0},isBalance:{type:Boolean,default:!1}},emits:["update:token"],data:function(){return{errorIcon:Xt,show:!1,keyword:"",searchTokens:this.tokens||[],loading:!1,nativeToken:Yt["k"]}},computed:{searchResultTokens:function(){var e,t=this;return(null===(e=this.searchTokens)||void 0===e?void 0:e.length)>0?this.searchTokens:this.tokens.filter((function(e){return t.hasNative||e.address!==Yt["k"]}))}},watch:{keyword:function(e){""!==e?this.tokenSearch():this.searchTokens=this.tokens},show:function(e){var t,i,n;e&&(this.searchTokens=this.tokens,this.keyword=""),console.log("isRefreshEnable",e),null===(t=window)||void 0===t||null===(i=t._tw_)||void 0===i||null===(n=i.isRefreshEnable)||void 0===n||n.call(i,"bridge",!e)}},methods:{onSearch:function(e){console.log(e),Zt&&(clearTimeout(Zt),Zt=null),this.search()},onCancel:function(){this.keyword="",this.show=!1},handleSelectToken:function(e){var t=this;if(null!==e&&void 0!==e&&e.address||null!==e&&void 0!==e&&e.token){var i=Object(et["a"])(Object(et["a"])({},e),{},{address:e.address||e.token,isbaseToken:this.token.isbaseToken});this.$emit("update:token",i),Object.keys(i).forEach((function(e){t.token[e]=i[e]})),this.show=!1}},tokenSearch:function(){var e=this;Zt&&(clearTimeout(Zt),Zt=null),Zt=setTimeout((function(){e.search()}),800)},search:function(){var e=this;if(""!==this.keyword){var t=new RegExp(this.keyword,"i"),i=this.tokens.filter((function(i){return(t.test(i.address)||t.test(i.symbol)||t.test(i.name))&&(e.hasNative||i.address!==Yt["k"])}));this.loading=!0;var n=this.keyword;Object(Kt["X"])(this.keyword,this.chain).then((function(t){var o,a,s;if(n===e.keyword){var l=null===(o=t.filter)||void 0===o||null===(a=o.call(t,(function(t){return t.chain===e.chain&&!i.some((function(e){return e.token===t.token}))})))||void 0===a||null===(s=a.map)||void 0===s?void 0:s.call(a,(function(e){return Object(et["a"])(Object(et["a"])({},e),{},{address:e.token,decimals:e.decimals||e.decimal})}));e.searchTokens=[].concat(Object(tt["a"])(i),Object(tt["a"])(l))}})).catch((function(t){console.log(t),e.searchTokens=[]})).finally((function(){e.loading=!1}))}else this.searchTokens=this.tokens.filter((function(t){return e.hasNative||t.address!==Yt["k"]}))}}};i("5ceb");const ti=_t()(ei,[["render",Jt],["__scopeId","data-v-55947970"]]);var ii=ti,ni=i("a2ef"),oi=i("ce94"),ai=i("cf1a"),si=i("449c"),li=i("497e"),ri=i("fadf"),ci=function(e){return Object(n["pushScopeId"])("data-v-f897fa40"),e=e(),Object(n["popScopeId"])(),e},ui={class:"select-box"},di={class:"flex items-center"},mi={style:{background:"#fff",padding:"0.2rem 0.3rem 1rem 0.3rem","--van-cell-background-color":"transparent"}},pi={class:"setting-title"},hi={class:"card-container"},bi={class:"font-500"},vi={class:"color-999 ml-5"},fi=ci((function(){return Object(n["createElementVNode"])("div",{class:"setting-title"},"Gas Price(GWEI)",-1)})),gi={class:"slippage-setting"},ki=["onClick"],Oi={class:"color-999"},wi={class:"mt-5 font-500"};function ji(e,t,i,o,a,s){var l=Object(n["resolveComponent"])("van-field"),r=Object(n["resolveComponent"])("van-button"),c=Object(n["resolveComponent"])("van-action-sheet");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",ui,[Object(n["createElementVNode"])("div",di,[Object(n["createElementVNode"])("i",{class:"iconfont icon-settings",style:{color:"#999999"},onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(e){return a.show=!0}),["stop"]))})]),Object(n["createVNode"])(c,{show:a.show,"onUpdate:show":t[2]||(t[2]=function(e){return a.show=e}),title:e.$t("gasSetting"),style:{"--van-popup-background-color":"#fff","min-height":"40%"}},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",mi,[Object(n["createElementVNode"])("div",pi,Object(n["toDisplayString"])(e.$t("gasFee"))+"(BNB)",1),Object(n["createElementVNode"])("div",hi,[Object(n["createElementVNode"])("span",bi,Object(n["toDisplayString"])(s.estimatedB),1),Object(n["createElementVNode"])("span",vi,"â‰ˆ"+Object(n["toDisplayString"])(s.estimatedU),1)]),fi,Object(n["createElementVNode"])("div",gi,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(s.gasPriceList,(function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("button",{key:t,type:"button",class:Object(n["normalizeClass"])({active:a.gasPriceValue===e.value}),onClick:function(t){return a.gasPriceValue=e.value}},[Object(n["createElementVNode"])("span",Oi,Object(n["toDisplayString"])(e.name),1),Object(n["createElementVNode"])("span",wi,Object(n["toDisplayString"])(e.value),1)],10,ki)})),128)),Object(n["createVNode"])(l,{class:"input",type:"number",min:s.standardGasPriceD,placeholder:e.$t("custom"),modelValue:a.gasPriceValue,"onUpdate:modelValue":t[1]||(t[1]=function(e){return a.gasPriceValue=e}),onBlur:s.handleBlur,clearable:""},null,8,["min","placeholder","modelValue","onBlur"])]),Object(n["createVNode"])(r,{block:"",type:"primary","native-type":"button",color:"#3F80F7",class:"submit-btn",style:Object(n["normalizeStyle"])({marginTop:"1.5rem"}),onClick:Object(n["withModifiers"])(s.submitSwapGasSet,["stop"])},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("confirm")),1)]})),_:1},8,["style","onClick"])])]})),_:1},8,["show","title"])])}var Ti=i("901e"),Si=i.n(Ti),yi=i("2c28"),Ni={name:"SwapGasSet",props:{standardGasPrice:{type:[Number,String],default:"3000000000"},gas:{type:[Number,String],default:Yt["d"]},nativePrice:[Number,String]},emits:["updateGasPrice"],setup:function(){var e=Object(yi["useStorage"])("gasSetting",{},localStorage);return{gasSetting:e}},data:function(){var e=this.$store.getters.netId,t=this.standardGasPrice;if(e){var i,n=null===(i=this.gasSetting)||void 0===i?void 0:i[e];t=(null===n||void 0===n?void 0:n.customGasPrice)||("bsc"===e?Yt["c"]:this.standardGasPrice)}return{show:!1,gasPriceValue:new Si.a(t||this.standardGasPrice).div(Math.pow(10,9)).toFixed()}},computed:{standardGasPriceD:function(){return new Si.a(this.standardGasPrice).div(Math.pow(10,9)).toFixed(0)},gasPriceList:function(){var e=new Si.a(this.standardGasPrice).div(Math.pow(10,9)),t=new Si.a(4).div(3),i=new Si.a(6).div(3);return[{name:this.$t("standard"),value:e.toFixed(0)},{name:this.$t("fast1"),value:t.times(e).toFixed(0)},{name:this.$t("instant"),value:i.times(e).toFixed(0)}]},estimatedB:function(){var e=this.gas;return e?this.$f.formatNumber2(new Si.a(e.toString()).times(this.gasPriceValue).div(String(Math.pow(10,9))).toFixed()||"0",2):"0"},estimatedU:function(){var e=this.gas;if(!e)return"0";var t=this.nativePrice;return this.$f.formatNumberCurrencyUnit(new Si.a(e.toString()).times(t).times(this.gasPriceValue).div(String(Math.pow(10,9))).toFixed()||"0",2)}},watch:{show:function(e){if(e){var t=this.$store.getters.netId,i=this.standardGasPrice;if(t){var n,o=null===(n=this.gasSetting)||void 0===n?void 0:n[t];i=(null===o||void 0===o?void 0:o.customGasPrice)||("bsc"===t?Yt["c"]:this.standardGasPrice)}this.gasPriceValue=new Si.a(i).div(Math.pow(10,9)).toFixed()||this.standardGasPrice}}},methods:{handleBlur:function(){var e=new Si.a(this.standardGasPrice).div(Math.pow(10,9));this.show&&e.gt(this.gasPriceValue)&&(this.gasPriceValue=e.toFixed(0))},submitSwapGasSet:function(){var e=new Si.a(this.gasPriceValue||"0").times(Math.pow(10,9)).toFixed(0),t=this.$store.getters.netId;if(t){var i=this.gasSetting[t];this.gasSetting=Object(et["a"])(Object(et["a"])({},this.gasSetting),{},Object(Xe["a"])({},t,Object(et["a"])(Object(et["a"])({},i),{},{customGasPrice:e}))),this.$emit("updateGasPrice",this.gasSetting)}this.show=!1}}};i("eb18");const $i=_t()(Ni,[["render",ji],["__scopeId","data-v-f897fa40"]]);var xi=$i,_i=i("3edc"),Ai=i("f465"),Vi=i("335a"),Ci=i("847c"),Ei=i("cc92"),Bi=i("f325"),Ii=i("8b19"),Pi=i("64b9");function Li(e){return Di.apply(this,arguments)}function Di(){return Di=Object(Ze["a"])(regeneratorRuntime.mark((function e(t){var i,n,o,a,s,l,r,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ci["d"].getAccountInfo(new Pi["e"](t));case 2:if(i=e.sent,null!==i){e.next=5;break}throw Error(" get id info error ");case 5:return n=Bi["f"].decode(i.data),o=n.marketId,e.next=9,Ci["d"].getAccountInfo(o);case 9:if(a=e.sent,null!==a){e.next=12;break}throw Error(" get market info error");case 12:return s=Bi["j"].decode(a.data),l=n.lpMint,e.next=16,Ci["d"].getAccountInfo(l);case 16:if(r=e.sent,null!==r){e.next=19;break}throw Error(" get lp mint info error");case 19:return c=Bi["p"].decode(r.data),e.abrupt("return",{id:t,baseMint:n.baseMint.toString(),quoteMint:n.quoteMint.toString(),lpMint:n.lpMint.toString(),baseDecimals:n.baseDecimal.toNumber(),quoteDecimals:n.quoteDecimal.toNumber(),lpDecimals:c.decimals,version:4,programId:i.owner.toString(),authority:Bi["h"].getAssociatedAuthority({programId:i.owner}).publicKey.toString(),openOrders:n.openOrders.toString(),targetOrders:n.targetOrders.toString(),baseVault:n.baseVault.toString(),quoteVault:n.quoteVault.toString(),withdrawQueue:n.withdrawQueue.toString(),lpVault:n.lpVault.toString(),marketVersion:3,marketProgramId:n.marketProgramId.toString(),marketId:n.marketId.toString(),marketAuthority:Bi["k"].getAssociatedAuthority({programId:n.marketProgramId,marketId:n.marketId}).publicKey.toString(),marketBaseVault:s.baseVault.toString(),marketQuoteVault:s.quoteVault.toString(),marketBids:s.bids.toString(),marketAsks:s.asks.toString(),marketEventQueue:s.eventQueue.toString(),lookupTableAccount:Pi["e"].default.toString()});case 21:case"end":return e.stop()}}),e)}))),Di.apply(this,arguments)}var Fi=i("3bd4"),Gi=i("4360");function Ri(e){return Ui.apply(this,arguments)}function Ui(){return Ui=Object(Ze["a"])(regeneratorRuntime.mark((function e(t){var i,n,o,a,s,l,r,c,u,d,m,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Gi["a"].state.solanaWallet,e.next=3,Li(t.targetPool);case 3:return o=e.sent,a=Object(Bi["z"])(o),e.t0=Bi["h"],e.t1=a,e.next=9,Bi["h"].fetchInfo({connection:Ci["d"],poolKeys:a});case 9:return e.t2=e.sent,e.t3=t.inputTokenAmount,e.t4=t.outputToken,e.t5=t.slippage,e.t6={poolKeys:e.t1,poolInfo:e.t2,amountIn:e.t3,currencyOut:e.t4,slippage:e.t5},s=e.t0.computeAmountOut.call(e.t0,e.t6),l=s.amountOut,r=s.minAmountOut,e.next=19,Bi["h"].makeSwapInstructionSimple({connection:Ci["d"],poolKeys:a,userKeys:{tokenAccounts:t.walletTokenAccounts,owner:n.publicKey},amountIn:t.inputTokenAmount,amountOut:r,fixedSide:"in",makeTxVersion:Ii["e"]});case 19:return c=e.sent,u=c.innerTransactions,console.log("amountOut:",l.toFixed(),"  minAmountOut: ",r.toFixed()),d=u.reduce((function(e,t){return e.concat(t.instructions)}),[]),m=(i=new Pi["i"]).add.apply(i,Object(tt["a"])(d)),console.log("transaction",m),e.next=27,Object(Ci["a"])(m,Ci["d"],n.publicKey,(function(){for(var e,t,i,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return null===(e=window)||void 0===e||null===(t=e.trustwallet)||void 0===t||null===(i=t.solana)||void 0===i?void 0:i.signTransaction.apply(i,o)}));case 27:return p=e.sent,e.abrupt("return",{hash:p,wait:function(){return Object(Ci["b"])(p)}});case 29:case"end":return e.stop()}}),e)}))),Ui.apply(this,arguments)}function Mi(){return Qi.apply(this,arguments)}function Qi(){return Qi=Object(Ze["a"])(regeneratorRuntime.mark((function e(){var t,i,n,o,a,s,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=Gi["a"].state.solanaWallet,i=Ii["a"].USDC,n=Ii["a"].RAY,o="EVzLJhqMtdC1nPmz8rNd6xGfVjDPxpLZgq7XJuNfMZ6",a=new Bi["s"](i,9e5),s=new Bi["l"](1,100),e.next=8,Object(Fi["c"])(Ci["d"],t.publicKey);case 8:l=e.sent,Ri({outputToken:n,targetPool:o,inputTokenAmount:a,slippage:s,walletTokenAccounts:l,wallet:t}).then((function(e){var t=e.hash;console.log("hash",t)}));case 10:case"end":return e.stop()}}),e)}))),Qi.apply(this,arguments)}var zi=i("8e2e"),qi=i("ddd2"),Hi=i("ddc3"),Wi=null,Ji=null,Ki=null,Yi=null,Xi=null,Zi=null,en=null;_i["a"].props.components.default=function(){return{OpenIndicator:{render:function(){return Object(n["h"])("span",{innerHTML:'<svg height="8" viewBox="0 0 14 8" width="14" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd" transform="matrix(0 1 -1 0 16 -5)"><path d="m0 0h18v18h-18z"/><path d="m12.8008158 9.14463395c-.0305856.13208319-.0973435.25748808-.2002738.36041835l-6.0104076 6.0104076c-.29289322.2928933-.76776696.2928933-1.06066017 0-.29289322-.2928932-.29289322-.7677669 0-1.0606601l5.48233267-5.48233272-5.48147681-5.48147682c-.29289322-.29289322-.29289322-.76776696 0-1.06066017.29289321-.29289322.76776695-.29289322 1.06066017 0l6.01040764 6.01040764c.1909127.19091266.2573853.45914247.1994179.70389622z" fill="#999"/></g></svg>'})}}}};var tn="2",nn=["limit","limit","swap","noGas"],on={name:"Swap",components:{PercentStep:nt["a"],TxItem:ot["a"],SwapSelectToken:ii,ConfirmSwap:ni["a"],PriceChart:ai["a"],SlippageButton:si["a"],ConfirmLimit:oi["a"],LimitTxItem:at["a"],vSelect:_i["a"],RebateImg:li["a"],SwapModeSet:ri["a"],NoGasTxItem:Vt,SwapGasSet:xi},setup:function(){var e=Object(yi["useStorage"])("solanaTxs",[]),t=Object(zi["a"])("solanaTxs1",e.value.slice());return{solanaTxs:t}},data:function(){var e,t,i,n,o,a,s,l,r,c,u,d,m=null===(e=this.$route.params)||void 0===e||null===(t=e.id)||void 0===t||null===(i=t.split)||void 0===i?void 0:i.call(t,"-"),p=Object(it["a"])(m,2),h=p[0],b=p[1],v=!localStorage.autoSlippage||JSON.parse(localStorage.autoSlippage),f=localStorage.swapSlippage||"auto",g=this.$route.params.type?Number(this.$route.params.type):2;return 3!==g||null!==(n=window)&&void 0!==n&&null!==(o=n._tw_)&&void 0!==o&&o.appExchangeNoGas&&"bsc"===b||(g=2),{quoteSolanaRaydiumSwap:Ei["a"],howToUse:Mi,LimitExpiredDays:Yt["f"],nativeToken:Yt["k"],height:100,swapTokenInfo:{},tokens:[],token1:{address:h||"",chain:b||"",balance:0,symbol:""},token2:{address:"",chain:"",balance:0,symbol:""},fromAmount:"",toAmount:"",baseToken:{token:{symbol:""},pairs:[]},baseTokenExtra:{},selected:g,dataX:[],dataY:[],swapQuoteInfo:{},isPairShowMore:!1,quoteLoading:!1,allowance:0,loadingApprove:!1,loadingSwap:!1,dialogVisibleSwap:!1,swapSubmitInfo:{},swapInfo:{fromToken:{symbol:"",name:"",decimals:18,address:"",logoURI:""},toToken:{symbol:"",name:"",decimals:18,address:"",logoURI:""},isAmountOut:!1},loadingConfirmSwap:!1,tokensPrice:{},swapRouterPath:[],nativePrice:0,initTxs:[],txsLoading:!1,isCurrentToken:!0,userBalanceTokens:[],isAndroid:!(null===(a=window)||void 0===a||null===(s=a._tw_)||void 0===s||!s.appGetPlatform),gasPrice:"0",spender:"",isTaxHigh:!1,isCannotSellAll:!1,baseTokenPrice:0,isTax:!1,txsTokens:sessionStorage.txsTokens?JSON.parse(sessionStorage.txsTokens||[]):[],isAmount:!0,swapPathList:[],listRouter:[],dialogListRouterVisible:!1,selectedRouterIndex:0,openLp:null===(l=window)||void 0===l||null===(r=l._tw_)||void 0===r?void 0:r.openLp,tx:{},userTokenList:[],activeTab:Number(this.$route.query.dir)||0,limitFromToken:{address:"",chain:"",balance:0,symbol:"",price:0},limitFromAmount:"",limitToToken:{address:h||"",chain:b||"",balance:0,symbol:"",price:0},limitToAmount:"",limitPrice:"",loadingLimit:!1,dialogVisibleLimit:!1,loadingConfirmLimit:!1,limitInfo:{fromToken:{address:"",chain:"",balance:0,symbol:"",price:0},toToken:{address:h||"",chain:b||"",balance:0,symbol:"",price:0},fromAmount:"",toAmount:"",targetToken:"",targetLimitPrice:""},limitAllowance:0,loadingLimitApprove:!1,quoteLimitLoading:!1,tabActive1:null!==(c=nn[g])&&void 0!==c?c:"limit",limitOrders:[],limitMinReturn:0,loadingGetLimitOrder:!1,limitToken1:{address:h||"",chain:b||"",balance:0,symbol:"",price:0},limitAmount1:"",limitToken2:{address:"",chain:"",balance:0,symbol:"",price:0},limitAmount2:"",rateType:!0,autoSlippage:v,slippageInfo:{slippage:tn,autoSlippage:!0},limitQuoteLoading:!1,limitSlippage:localStorage.limitSlippage||"5",loadingAllowance:!1,loadingLimitAllowance:!1,triggerPrice:"",limitGasU:"0",autoSwapMode:"fast",customSwapMode:localStorage.swapMode||"auto",autoSlippageValue:tn,customSlippage:f,hasMEVBot:!1,isHotToken:!1,noGasSlippage:localStorage.noGasSlippage||"5",noGasTxList:[],loadingGetNoGasList:!1,isHasUnTx:!1,isSupportNoGas:null===(u=window)||void 0===u||null===(d=u._tw_)||void 0===d?void 0:d.appExchangeNoGas,gasBalance:0,isNoGas:!1,gasPriceKey:0,gasSetting:Vi["a"].get("gasSetting",{}),solanaQuoteResponse:{},solanaSwapTokenPrice:[0,0],quoteSolanaPreParams:{}}},computed:{swapMode:function(){return"auto"===this.customSwapMode?this.autoSwapMode:this.customSwapMode},slippage:function(){return"auto"===this.customSlippage?this.autoSlippageValue:this.customSlippage},typeTabs:function(){return[{name:this.$t("buy"),type:0},{name:this.$t("sell"),type:1}]},types:function(){var e,t;return[].concat(Object(tt["a"])(null!==(e=window)&&void 0!==e&&null!==(t=e._tw_)&&void 0!==t&&t.appExchangeNoGas&&"eth"!==this.$store.getters.netId&&this.isNoGas?[{name:this.$t("noGasSwapT"),value:3}]:[{name:this.$t("swapT"),value:2}]),[{name:this.$t("limitT"),value:0},{name:this.$t("stopLimit"),value:1}])},typeName:function(){var e,t,i,n=this;return null===(e=this.types)||void 0===e||null===(t=e.find)||void 0===t||null===(i=t.call(e,(function(e){return e.value===n.selected})))||void 0===i?void 0:i.name},netId:function(){return this.$store.getters.netId||""},chain:function(){var e,t,i,n,o,a,s,l,r,c=this.$store.getters.netId||(null===(e=this.$route.params)||void 0===e||null===(t=e.id)||void 0===t||null===(i=t.split)||void 0===i||null===(n=i.call(t,"-"))||void 0===n?void 0:n[1])||"";return null===(o=window)||void 0===o||null===(a=o.trustwallet)||void 0===a||!a.solana||null!==(s=window.ethereum)&&void 0!==s&&null!==(l=s.address)&&void 0!==l&&null!==(r=l.startsWith)&&void 0!==r&&r.call(l,"0x")||!window.ethereum.address||(c="solana"),c},tokenInfo:function(){var e,t,i,n;if("Swap"!==this.$route.name)return{id:"",token:"",chain:""};var o=null===(e=this.$route.params)||void 0===e||null===(t=e.id)||void 0===t||null===(i=t.split)||void 0===i?void 0:i.call(t,"-"),a=Object(it["a"])(o,2),s=a[0],l=a[1];return{id:null===(n=this.$route.params)||void 0===n?void 0:n.id,token:s,chain:l}},tabs:function(){return[{name:this.$t("buy"),value:"buy"},{name:this.$t("sell"),value:"sell"}]},isApprove:function(){if("solana"===this.chain)return!0;if(!this.allowance)return!1;var e=this.fromToken.decimals||0;return St["utils"].parseUnits(new Si.a(this.fromAmount||0).toFixed(e),e).lte(this.allowance)},isLimitApprove:function(){if(!this.limitAllowance)return!1;var e=0===this.activeTab?this.limitToken2:this.limitToken1,t=e.decimals||0,i=0===this.activeTab?this.limitAmount2:this.limitAmount1;return St["utils"].parseUnits(new Si.a(i||0).toFixed(t),t).lte(this.limitAllowance)},minReceived:function(){var e,t=(null===(e=this.swapQuoteInfo)||void 0===e?void 0:e.routerPath)||{},i=t[t.length-1];return new Si.a(null===i||void 0===i?void 0:i.amount).times(100-Number(this.slippage)).div(Math.pow(10,((null===i||void 0===i?void 0:i.decimals)||0)+2)).toFixed((null===i||void 0===i?void 0:i.decimals)||0)},maxSold:function(){var e,t=(null===(e=this.swapQuoteInfo)||void 0===e?void 0:e.routerPath)||{},i=t[0];return new Si.a(null===i||void 0===i?void 0:i.amount).times(1+Number(this.slippage)/100).div(Math.pow(10,(null===i||void 0===i?void 0:i.decimals)||0)).toFixed((null===i||void 0===i?void 0:i.decimals)||0)},txs:function(){var e,t,i=this,n="solana"===this.chain?null===(e=this.solanaTxs)||void 0===e||null===(t=e.filter)||void 0===t?void 0:t.call(e,(function(e){return e.wallet_address===i.$store.state.currentAccount||!e.wallet_address})):this.initTxs;if(this.isCurrentToken){var o,a,s,l,r,c,u,d,m=null===(o=this.$route.params)||void 0===o||null===(a=o.id)||void 0===a||null===(s=a.split)||void 0===s||null===(l=s.call(a,"-"))||void 0===l?void 0:l[0],p=null===(r=this.$route.params)||void 0===r||null===(c=r.id)||void 0===c||null===(u=c.split)||void 0===u||null===(d=u.call(c,"-"))||void 0===d?void 0:d[1],h=Vi["a"].get("chainConfig",Yt["l"])||{},b=null===h||void 0===h?void 0:h[p],v=null===b||void 0===b?void 0:b.wmainWrapper;return m=m===Yt["k"]?v:m,null===n||void 0===n?void 0:n.filter((function(e){return e.from_address===m||e.to_address===m||(m===Yt["k"]||m===v)&&(e.from_address===Yt["k"]||e.from_address===v||e.to_address===Yt["k"]||e.to_address===v)}))}return n},filterLimitOrders:function(){if(this.isCurrentToken){var e,t=this.limitToken1.address;return null===(e=this.limitOrders)||void 0===e?void 0:e.filter((function(e){return e.target_token===t}))}return this.limitOrders},filterNoGasTxList:function(){if(this.isCurrentToken){var e,t=this.limitToken1.address;return null===(e=this.noGasTxList)||void 0===e?void 0:e.filter((function(e){return e.from_token===t||e.to_token===t}))}return this.noGasTxList},taxStr:function(){var e,t,i,n,o,a,s,l=(null===(e=this.swapQuoteInfo)||void 0===e?void 0:e.totalTax)||((null===(t=this.swapQuoteInfo)||void 0===t?void 0:t.total_sell_tax)||0)+((null===(i=this.swapQuoteInfo)||void 0===i?void 0:i.total_buy_tax)||0);return l>0?"(".concat(this.$t("tax"),": ").concat(this.$f.formatNumber2(l,1),"%)"):0===this.activeTab&&(null===(n=this.baseTokenExtra)||void 0===n?void 0:n.buy_tax)>0?"(".concat(this.$t("tax"),": ").concat(this.$f.formatNumber2(null===(a=this.baseTokenExtra)||void 0===a?void 0:a.buy_tax,1),"%)"):1===this.activeTab&&(null===(o=this.baseTokenExtra)||void 0===o?void 0:o.sell_tax)>0?"(".concat(this.$t("tax"),": ").concat(this.$f.formatNumber2(null===(s=this.baseTokenExtra)||void 0===s?void 0:s.sell_tax,1),"%)"):""},priceImpactV:function(){var e,t,i,n,o,a,s,l,r;if(!Number(this.fromAmount)&&!Number(this.toAmount))return"";var c,u=this.$store.getters.netId||(null===(e=this.$route.params)||void 0===e||null===(t=e.id)||void 0===t||null===(i=t.split)||void 0===i||null===(n=i.call(t,"-"))||void 0===n?void 0:n[1])||"";if(null===(o=window)||void 0===o||null===(a=o.trustwallet)||void 0===a||!a.solana||null!==(s=window.ethereum)&&void 0!==s&&null!==(l=s.address)&&void 0!==l&&null!==(r=l.startsWith)&&void 0!==r&&r.call(l,"0x")||!window.ethereum.address||(u="solana"),"solana"===u)return new Si.a((null===(c=this.solanaQuoteResponse)||void 0===c?void 0:c.priceImpactPct)||0);var d=this.swapQuoteInfo.routerPath,m=(null===d||void 0===d?void 0:d.length)>0?null===d||void 0===d?void 0:d[0]:null,p=(null===d||void 0===d?void 0:d.length)>0?null===d||void 0===d?void 0:d[d.length-1]:null;if(m&&p){var h=this.swapQuoteInfo.from_price,b=this.swapQuoteInfo.to_price,v=St["utils"].formatUnits(m.amount,m.decimals),f=St["utils"].formatUnits(p.amount,p.decimals);return new Si.a(v).times(h).div(new Si.a(f).times(b)).minus(1).abs()}return""},priceImpact:function(){return this.priceImpactV?this.$f.formatNumber2(this.priceImpactV.times(100).toFixed(),2)+"%":""},swapButtonColor:function(){var e,t,i,n;return this.$store.state.currentAccount&&window.ethereum?null!==(e=this.priceImpactV)&&void 0!==e&&null!==(t=e.gt)&&void 0!==t&&t.call(e,.4)?"#999":null!==(i=this.priceImpactV)&&void 0!==i&&null!==(n=i.gt)&&void 0!==n&&n.call(i,.1)?"#F7933F":0===this.activeTab?this.$store.getters.upColor[3]:1===this.activeTab?this.$store.getters.downColor[3]:"#558BED":"#999"},limitButtonColor:function(){return this.$store.state.currentAccount&&window.ethereum?0===this.activeTab?this.$store.getters.upColor[3]:1===this.activeTab?this.$store.getters.downColor[3]:"#558BED":"#999"},priceImpactColor:function(){var e,t,i,n,o,a;return null!==(e=this.priceImpactV)&&void 0!==e&&null!==(t=e.gt)&&void 0!==t&&t.call(e,.4)?"#F81111":null!==(i=this.priceImpactV)&&void 0!==i&&null!==(n=i.gt)&&void 0!==n&&n.call(i,.1)?"#F7933F":null!==(o=this.priceImpactV)&&void 0!==o&&null!==(a=o.gt)&&void 0!==a&&a.call(o,.05)?"#f8be46":""},swapTokens:function(){var e=Object(tt["a"])(this.userBalanceTokens.slice());return this.tokens.slice().forEach((function(t){var i=e.find((function(e){return e.id===t.id}));i?i.logo_url=t.logo_url:e.push(t)})),e.length>0?e:this.tokens.slice()},isShow:function(){var e,t,i,n,o,a,s,l,r=this.$store.getters.netId||(null===(e=this.$route.params)||void 0===e||null===(t=e.id)||void 0===t||null===(i=t.split)||void 0===i||null===(n=i.call(t,"-"))||void 0===n?void 0:n[1])||"",c=Vi["a"].get("chainConfig",Yt["l"])||{};return!(!c||!r)&&(null!==(o=null===(a=c[r])||void 0===a||null===(s=a.swaps)||void 0===s||null===(l=s.some)||void 0===l?void 0:l.call(s,(function(e){return e.router_address})))&&void 0!==o&&o)},fromToken:function(){return 1===this.activeTab?this.token1:this.token2},toToken:function(){return 1===this.activeTab?this.token2:this.token1},disabled1:function(){var e,t;if(!Number(this.limitPrice))return!0;var i=null===(e=this.baseToken)||void 0===e||null===(t=e.token)||void 0===t?void 0:t.current_price_usd;return 1===this.activeTab&&this.limitPrice<i},disabled2:function(){var e,t;if(!Number(this.limitPrice))return!0;var i=null===(e=this.baseToken)||void 0===e||null===(t=e.token)||void 0===t?void 0:t.current_price_usd;return 0===this.activeTab&&this.limitPrice>i},estimatedFee:function(){var e,t,i=null!==(e=this.swapInfo.gasValue)&&void 0!==e?e:Yt["d"];if(!i)return"0";var n=this.$store.getters.netId,o=n?Object(et["a"])({},(null===(t=this.gasSetting)||void 0===t?void 0:t[n])||{}):{},a=(null===o||void 0===o?void 0:o.customGasPrice)||Yt["c"],s="bsc"===n?a:this.gasPrice,l=this.nativePrice;return this.$f.formatNumberCurrencyUnit(new Si.a(i.toString()).times(l).times(s).div(String(Math.pow(10,18))).toFixed()||"0",2)},customGasPrice:function(){var e,t,i=this.$store.getters.netId,n=(null===(e=this.gasSetting)||void 0===e||null===(t=e[i])||void 0===t?void 0:t.customGasPrice)||Yt["c"],o="bsc"===i?n:this.gasPrice;return o}},watch:{"$route.params.id":function(e){e&&"Swap"===this.$route.name&&(this.autoSlippageValue=tn,this.isTaxHigh=!1,this.isCannotSellAll=!1,this.baseTokenExtra={},this.baseTokenPrice=0,this.swapQuoteInfo.totalTax=0,this.swapQuoteInfo.total_sell_tax=0,this.swapQuoteInfo.total_buy_tax=0,this.selectedRouterIndex=0,this.getBaseToken(),this.getUserAllTxs(),this.getUserTokenList(),this.getAllowance(),this.getTokenDetails(),2===this.selected?this.supportChain():0!==this.selected&&1!==this.selected&&3!==this.selected||this.supportChainLimit(),this.getLimitAllowance())},"$store.state.currentAccount":function(e){e&&"Swap"===this.$route.name&&(this.autoSlippageValue=tn,this.isTaxHigh=!1,this.isCannotSellAll=!1,this.selectedRouterIndex=0,this.getUserAllTxs(),this.getUserTokenList(),this.getSwapTokenList(),this.getAllowance(),this.getTokenDetails(),this.getLimitAllowance())},isPairShowMore:function(){this.getLeftHeight()},"$store.state.ws.tx":function(e){var t=this;this.tx=e,Yi||(Yi=setTimeout((function(){var e,i=t.tx,n=t.baseToken.token.chain||"",o=Vi["a"].get("chainConfig",Yt["l"])||{},a=null===o||void 0===o?void 0:o[n],s=null===a||void 0===a?void 0:a.wmainWrapper,l=null===(e=t.baseToken)||void 0===e?void 0:e.token.token;l===Yt["k"]&&n&&s&&(l=s);var r=t.baseToken.token.price_change,c=100*Number(t.baseToken.token.current_price_usd)/(100+Number(r));i.from_address===l?(t.baseToken.token.current_price_usd=i.from_price_usd,t.baseToken.token.price_change=100*(i.from_price_usd-c)/c):i.to_address===l&&(t.baseToken.token.current_price_usd=i.to_price_usd,t.baseToken.token.price_change=100*(i.to_price_usd-c)/c),i.from_address===t.limitToken1.address?t.limitToken1.price=i.from_price_usd:i.to_address===t.limitToken1.address&&(t.limitToken1.price=i.to_price_usd),i.to_address===t.limitToken2.address?t.limitToken2.price=i.to_price_usd:i.from_address===t.limitToken2.address&&(t.limitToken2.price=i.from_price_usd),t.dataY=t.dataY.map((function(e,i,n){return i===n.length-1?t.baseToken.token.current_price_usd:e}));var u=t.baseToken.pairs.findIndex((function(e){return e.pair===i.pair_address}));if(u>-1){var d=t.baseToken.pairs[u];i.from_address===d.token0_address?(i.from_reserve&&(t.baseToken.pairs[u].reserve0=i.from_reserve,t.baseToken.pairs[u].token0_price_usd=i.from_price_usd),i.to_reserve&&(t.baseToken.pairs[u].reserve1=i.to_reserve,t.baseToken.pairs[u].token1_price_usd=i.to_price_usd)):(i.to_reserve&&(t.baseToken.pairs[u].reserve0=i.to_reserve,t.baseToken.pairs[u].token0_price_usd=i.to_price_usd),i.from_reserve&&(t.baseToken.pairs[u].reserve1=i.from_reserve,t.baseToken.pairs[u].token1_price_usd=i.from_price_usd))}Yi=null}),1e3))},selected:function(e){var t,i,n;(this.$router.replace({name:"Swap",params:Object(et["a"])(Object(et["a"])({},this.$route.params),{},{type:e})}),2===this.selected)?(null===(t=this.$refs)||void 0===t||null===(i=t.percentStep)||void 0===i||null===(n=i.handleClick)||void 0===n||n.call(i,0),this.fromAmount="",this.toAmount="",this.getAllowance(),this.tabActive1="swap"):0===this.selected||1===this.selected?(this.supportChainLimit(),this.getLimitAllowance(),this.limitPrice=this.baseToken.token.current_price_usd?this.$f.formatNumber(this.baseToken.token.current_price_usd):"",this.triggerPrice=this.baseToken.token.current_price_usd?this.$f.formatNumber(this.baseToken.token.current_price_usd):"",this.tabActive1="limit"):3===this.selected&&(this.supportChainLimit(),this.getLimitAllowance(),this.tabActive1="noGas")},tabActive1:function(e){"swap"===e?this.getUserAllTxs():"limit"===e?this.getLimitOrder():"noGas"===e&&this.getNoGasList()}},mounted:function(){var e,t,i,n,o,a=this;if(this.getFeeInfo(),null===(e=window)||void 0===e||null===(t=e.trustwallet)||void 0===t||!t.solana||null!==(i=window.ethereum)&&void 0!==i&&null!==(n=i.address)&&void 0!==n&&null!==(o=n.startsWith)&&void 0!==o&&o.call(n,"0x")||!window.ethereum.address)try{window.ethereum?Object(qi["a"])().then((function(e){a.initActivated()})):this.initActivated()}catch(s){console.log(s)}else Object(Ci["c"])().then((function(e){a.initActivated()}))},activated:function(){},methods:{init:function(){this.getBaseToken(),this.getUserAllTxs(),this.getUserTokenList(),this.getAllowance(),this.getSwapTokenList(),2===this.selected?this.supportChain():0!==this.selected&&1!==this.selected&&3!==this.selected||this.supportChainLimit(),this.getLimitAllowance(),this.getLimitOrder(),this.getNoGasList()},initActivated:function(){var e,t,i,n,o,a,s,l,r,c,u;this.$f.setSwapSendType(""),this.handleWalletAddress(!1),this.selected=this.$route.params.type?Number(this.$route.params.type):2,3!==this.selected||null!==(e=window)&&void 0!==e&&null!==(t=e._tw_)&&void 0!==t&&t.appExchangeNoGas&&"eth"!==this.$store.getters.netId||(this.selected=2),this.tabActive1=null!==(i=nn[this.selected])&&void 0!==i?i:"swap";var d=sessionStorage.swap_token1?JSON.parse(sessionStorage.swap_token1):"",m=null===(n=this.$route.params)||void 0===n||null===(o=n.id)||void 0===o||null===(a=o.split)||void 0===a||null===(s=a.call(o,"-"))||void 0===s?void 0:s[0],p=this.$store.getters.netId||(null===(l=this.$route.params)||void 0===l||null===(r=l.id)||void 0===r||null===(c=r.split)||void 0===c||null===(u=c.call(r,"-"))||void 0===u?void 0:u[1])||"";m&&(m!==this.token1.address||d&&d.address!==m)?(this.token1={address:m||"",chain:p||"",balance:0,symbol:""},this.limitToken1=Object(et["a"])({},this.token1)):m||!d||p!==d.chain||this.token1.address||(this.limitToken1=Object(et["a"])({},this.swap_token1));var h=sessionStorage.swap_token2?JSON.parse(sessionStorage.swap_token2):"";h&&p===h.chain&&!this.token2.address&&(this.token2=Object(et["a"])({},h),this.limitToken2=Object(et["a"])({},h)),this.getBaseToken(),this.getUserTokenList(),this.getAllowance(),this.getSwapTokenList(),2===this.selected?this.supportChain():0!==this.selected&&1!==this.selected&&3!==this.selected||this.supportChainLimit(),"swap"===this.tabActive1?this.getUserAllTxs():"limit"===this.tabActive1?this.getLimitOrder():"noGas"===this.tabActive1&&this.getNoGasList(),this.getLimitAllowance(),this.getGasBalance(),this.getNativeTokenPrice(),this.getGasPrice()},formatUnits:St["utils"].formatUnits,formatPrice:function(e){return this.$f.formatNumber(e&&""!==e&&this.$store.state.tokensPrice[e]||0)},getPrice:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return!e||!t||isNaN(Number(e))||isNaN(Number(t))?"0":this.$f.formatNumber2(new Si.a(t).times(100-i).div(100*e).toFixed(7))||"0"},getFeeInfo:function(){var e=this;Object(Kt["u"])().then((function(t){var i=e.$store.getters.netId;e.$store.state.feeInfo=e.$f.formatFee(t,i)}))},watchFromAmount:function(){if(!this.quoteLoading||this.isAmount){var e=this.fromAmount,t=Number(e);""===e||"."===e?(this.fromAmount="",this.toAmount="",this.quoteLoading=!1):0===t&&0!==Number(this.toAmount)?(this.toAmount=0,this.quoteLoading=!1):t&&(this.isAmount=!0,this.toAmount="",this.getQuoteInfo())}},watchToAmount:function(){if(!this.quoteLoading||!this.isAmount){var e=this.toAmount,t=Number(e);""===e||"."===e?(this.fromAmount="",this.toAmount="",this.quoteLoading=!1):0===t&&0!==Number(this.fromAmount)?(this.fromAmount=0,this.quoteLoading=!1):t&&(this.fromAmount="",this.isAmount=!1,this.getQuoteInfo(!1))}},handleFromAmountMax:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.fromToken.balance||0;if(e){var i,n=this.fromToken.decimals||0;if((null===(i=this.fromToken)||void 0===i?void 0:i.address)===Yt["k"]){var o=this.fromToken.chain,a=Yt["j"][o]||.01;t=new Si.a(t).minus(a).times(e).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(n,"})?")))[0]}else t=new Si.a(t).times(e).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(n,"})?")))[0];0===Number(t)&&(t="")}this.fromAmount=t<0?0:t,this.watchFromAmount()},handlePercentChange:function(e,t){if(!t){var i=e/100,n=this.fromToken.balance||0;if(i){var o,a,s=this.fromToken.decimals||0;if((null===(o=this.fromToken)||void 0===o?void 0:o.address)===Yt["k"]||"So11111111111111111111111111111111111111112"===(null===(a=this.fromToken)||void 0===a?void 0:a.address)){var l=this.fromToken.chain,r=Yt["j"][l]||.01;n=new Si.a(n).minus(r).times(i).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(s,"})?")))[0]}else n=new Si.a(n).times(i).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(s,"})?")))[0];0===Number(n)&&(n="")}else n="";this.fromAmount!==n&&(this.fromAmount=n<0?0:n,this.watchFromAmount())}},handleToAmountMax:function(){this.toAmount=this.toToken.balance||0,this.watchToAmount()},switchTab:function(e){this.activeTab=e,2===this.selected?(this.$refs.percentStep.handleClick(0),this.fromAmount="",this.toAmount="",this.getAllowance()):0!==this.selected&&1!==this.selected&&3!==this.selected||(this.$refs.percentStep1.handleClick(0),this.limitAmount1="",this.limitAmount2="",this.getLimitAllowance())},handlePercentChange1:function(e,t){if(!t){var i=e/100,n=0===this.activeTab?this.limitToken2:this.limitToken1,o=n.balance||0;if(i){var a=n.decimals||18;if((null===n||void 0===n?void 0:n.address)===Yt["k"]||"So11111111111111111111111111111111111111112"===(null===n||void 0===n?void 0:n.address)){var s=n.chain,l=Yt["j"][s]||.01;o=new Si.a(o).minus(l).times(i).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(a,"})?")))[0]}else o=new Si.a(o).times(i).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(a,"})?")))[0];0===Number(o)&&(o="")}else o="";0===this.activeTab?this.limitAmount2!==o&&(this.limitAmount2=o<0?0:o,this.watchLimitAmount2()):this.limitAmount1!==o&&(this.limitAmount1=o<0?0:o,this.watchLimitAmount1())}},watchLimitAmount1:function(){var e=this;this.limitQuoteLoading||(Xi&&(clearTimeout(Xi),Xi=null),Xi=setTimeout((function(){var t=e.limitAmount1,i=Number(t);""===t||"."===t?(e.limitAmount1="",e.limitAmount2=""):0===i&&0!==Number(e.limitAmount2)?e.limitAmount2=0:i&&(e.limitAmount2="",e.watchLimitPrice())}),500))},watchLimitAmount2:function(){var e=this;this.limitQuoteLoading||(Zi&&(clearTimeout(Zi),Zi=null),Zi=setTimeout((function(){var t=e.limitAmount2,i=Number(t);""===t||"."===t?(e.limitAmount1="",e.limitAmount2=""):0===i&&0!==Number(e.limitAmount1)?e.limitAmount1=0:i&&(e.limitAmount1="",e.watchLimitPrice())}),500))},watchLimitPrice:function(){var e=this;this.supportChainLimit()&&(Number(this.limitPrice)&&(Number(this.limitAmount1)||Number(this.limitAmount2))&&this.limitToken1.address!==this.limitToken2.address&&""!==this.$store.state.wallet?(en&&(clearTimeout(en),en=null),en=setTimeout((function(){var t=0===e.activeTab?e.limitToken2:e.limitToken1,i=1===e.activeTab?e.limitToken2:e.limitToken1,n=St["utils"].parseUnits((0===e.activeTab?e.limitAmount2:e.limitAmount1)||"0",t.decimals).toString(),o=St["utils"].parseUnits((1===e.activeTab?e.limitAmount2:e.limitAmount1)||"0",i.decimals).toString(),a=t.address,s=i.address,l={from_token:a,to_token:s,amountIn:n,amountOut:o};3===e.selected&&(l.extraGas="250000"),e.limitQuoteLoading=!0,Object(Kt["W"])(l).then((function(t){var n,o,a,s;if(1!==t.toWrapper&&2!==t.toWrapper){e.limitGasU=t.gasU;var l=null===t||void 0===t||null===(n=t.routerPath)||void 0===n||null===(o=n.find)||void 0===o?void 0:o.call(n,(function(t){return t.address===e.limitToken1.address})),r=null===t||void 0===t||null===(a=t.routerPath)||void 0===a||null===(s=a.find)||void 0===s?void 0:s.call(a,(function(t){return t.address===e.limitToken2.address}));if(e.limitToken1.price=l.price,e.limitToken2.price=r.price,new Si.a((null===l||void 0===l?void 0:l.amount)||0).lte(0)||new Si.a((null===r||void 0===r?void 0:r.amount)||0).lte(0)||!t.isCanUseGas)e.$dialog.alert({title:e.$t("tips"),message:e.$t("limitOrderAmount"),confirmButtonText:e.$t("okay"),confirmButtonColor:"#558BED"});else{3===e.selected?e.limitAmount1&&e.limitAmount2?0===e.activeTab?e.limitAmount1=St["utils"].formatUnits(l.amount,l.decimals):e.limitAmount2=St["utils"].formatUnits(r.amount,r.decimals):e.limitAmount1?e.limitAmount2=St["utils"].formatUnits(r.amount,r.decimals):e.limitAmount2&&(e.limitAmount1=St["utils"].formatUnits(l.amount,l.decimals)):e.limitPrice&&e.limitAmount1&&e.limitAmount2?0===e.activeTab?e.limitAmount1=new Si.a(St["utils"].formatUnits(l.amount,l.decimals)).times(l.price||0).div(e.limitPrice||1).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(e.limitToken1.decimals,"})?")))[0]:e.limitAmount2=new Si.a(St["utils"].formatUnits(r.amount,r.decimals)).times(e.limitPrice||0).div(l.price||1).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(e.limitToken2.decimals,"})?")))[0]:e.limitPrice&&e.limitAmount1?e.limitAmount2=new Si.a(St["utils"].formatUnits(r.amount,r.decimals)).times(e.limitPrice||0).div(l.price||1).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(e.limitToken2.decimals,"})?")))[0]:e.limitPrice&&e.limitAmount2&&(e.limitAmount1=new Si.a(St["utils"].formatUnits(l.amount,l.decimals)).times(l.price||0).div(e.limitPrice||1).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(e.limitToken1.decimals,"})?")))[0]);var c=new Si.a(e.limitSlippage||0);3===e.selected&&(c=new Si.a(e.noGasSlippage||0)),c=new Si.a(1).minus(c.div(100));var u=0===e.activeTab?e.limitAmount1:e.limitAmount2;e.limitMinReturn=new Si.a(u||0).times(c).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(i.decimals,"})?")))[0]}}else e.limitQuoteLoading=!1})).catch((function(t){e.$f.handleError(t)})).finally((function(){e.limitQuoteLoading=!1}))}),500)):this.limitToken1.address===this.limitToken2.address&&this.$toast({position:"top",message:this.$t("twoIdenticalTokens")}))},minusLimitPrice:function(){this.limitPrice&&new Si.a(this.limitPrice).gt("0")&&(this.limitPrice=this.$f.formatNumber(new Si.a(this.limitPrice).times(.99).toFixed()),this.watchLimitPrice())},addLimitPrice:function(){this.limitPrice&&new Si.a(this.limitPrice).gt("0")&&(this.limitPrice=this.$f.formatNumber(new Si.a(this.limitPrice).times(1.01).toFixed()),this.watchLimitPrice())},quoteLimitTokenPrice:function(){var e=this,t=this.limitToken1.chain,i=this.limitToken1.address+"-"+t,n=this.limitToken2.address+"-"+t;return Object(Kt["O"])([i,n]).then(function(){var t=Object(Ze["a"])(regeneratorRuntime.mark((function t(i){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.limitToken1.price=(null===i||void 0===i||null===(n=i[0])||void 0===n?void 0:n.current_price_usd)||0,e.limitToken2.price=(null===i||void 0===i||null===(o=i[1])||void 0===o?void 0:o.current_price_usd)||0,t.abrupt("return",[e.limitToken1.price,e.limitToken2.price]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},getLeftHeight:function(){var e=this;this.$nextTick((function(){var t=Object(Ai["o"])(e.$refs.swapLeft),i=t.height;e.height=i}))},handleWalletAddress:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];""===this.$store.state.wallet||"importAddress"===this.$store.state.wallet?window.ethereum?(this.$store.state.importAddressVisible=!1,this.$store.commit("changeConnectVisible",!0)):this.$toast({message:this.$t("browserWalletNotDetected"),position:"top"}):e&&this.$store.commit("changeDisconnectVisible",!0)},handleTaxSlippage:function(){if(1===this.activeTab){var e,t;if(Number(this.autoSlippageValue)>Number(null===(e=this.baseTokenExtra)||void 0===e?void 0:e.sell_tax)+1)return;var i=Math.max(Math.min(Number(null===(t=this.baseTokenExtra)||void 0===t?void 0:t.sell_tax)+1,49.99),.5);this.autoSlippageValue=String(Number(i.toFixed(2)))}else{var n,o;if(Number(this.autoSlippageValue)>Number(null===(n=this.baseTokenExtra)||void 0===n?void 0:n.buy_tax)+1)return;var a=Math.max(Math.min(Number(null===(o=this.baseTokenExtra)||void 0===o?void 0:o.buy_tax)+1,49.99),.5);this.autoSlippageValue=String(Number(a.toFixed(2)))}},onSubmit:function(){try{var e,t,i,n;if(""===this.$store.state.wallet||"importAddress"===this.$store.state.wallet)return void this.handleWalletAddress();if(!this.supportChain())return;var o=this.$store.getters.netId||(null===(e=this.$route.params)||void 0===e||null===(t=e.id)||void 0===t||null===(i=t.split)||void 0===i||null===(n=i.call(t,"-"))||void 0===n?void 0:n[1])||"";if(o!==this.netId)return void this.$toast({message:this.$t("plsSwitchChain",{chain:o}),position:"top"});2===this.selected&&(this.isApprove?this.getSwapTx():this.approve())}catch(a){console.log(a)}},getSwapTokenList:function(){var e,t,i,n,o=this,a=this.$store.getters.netId||(null===(e=this.$route.params)||void 0===e||null===(t=e.id)||void 0===t||null===(i=t.split)||void 0===i||null===(n=i.call(t,"-"))||void 0===n?void 0:n[1])||"bsc";Object(Kt["K"])(a).then((function(e){var t,i;(o.tokens=(null===e||void 0===e?void 0:e.map((function(e){return Object(et["a"])(Object(et["a"])({},e),{},{id:e.token+"-"+e.chain,address:e.token})})))||[],"solana"===a)&&(o.tokens=null===(t=o.tokens)||void 0===t||null===(i=t.filter)||void 0===i?void 0:i.call(t,(function(e){return e.token!==Yt["k"]})).sort((function(e,t){return"So11111111111111111111111111111111111111112"===e.token?-1:1})));if((!o.token2.address||o.token1.address===o.token2.address)&&o.tokens.length>0){var n=o.tokens.findIndex((function(e){return/USDT/.test(e.symbol)}));n=n<0?0:n;var s,l=o.tokens[n];if(o.token1.address===l.address)l=0===n&&null!==(s=o.tokens[1])&&void 0!==s?s:o.tokens[0];o.token2=Object(et["a"])({},l)}if((!o.limitToken2.address||o.limitToken1.address===o.limitToken2.address)&&o.tokens.length>0){var r=o.tokens.findIndex((function(e){return/USDT/.test(e.symbol)}));r=r<0?0:r;var c,u=o.tokens[r];if(o.limitToken1.address===u.address)u=0===r&&null!==(c=o.tokens[1])&&void 0!==c?c:o.tokens[0];o.limitToken2=Object(et["a"])({},u)}o.getTokenDetails()}))},getUserTokenList:function(){var e,t,i,n,o=this,a=this.$store.getters.netId||(null===(e=this.$route.params)||void 0===e||null===(t=e.id)||void 0===t||null===(i=t.split)||void 0===i||null===(n=i.call(t,"-"))||void 0===n?void 0:n[1])||"bsc";Object(Kt["S"])(a).then((function(e){var t,i,n;"solana"===a?o.userBalanceTokens=null===e||void 0===e?void 0:e.map((function(e){return Object(et["a"])(Object(et["a"])({},e),{},{value:e.balance})})):o.userBalanceTokens=null===(t=(null===e||void 0===e||null===(i=e.map((function(e){return Object(et["a"])(Object(et["a"])({},e),{},{id:e.token+"-"+e.chain,address:e.token})})))||void 0===i||null===(n=i.filter)||void 0===n?void 0:n.call(i,(function(e){return(e.risk_score||0)<60&&(e.risk_level||0)>=0&&"blacklist"!==e.flag&&""!==e.symbol&&"lp"!==e.flag})))||[])||void 0===t?void 0:t.filter((function(e){return!!Number(e.value)}));o.userBalanceTokens.length>0&&"tron"!==a&&"brc20"!==a&&"solana"!==a&&/^0x[0-9a-zA-Z]{40}$/.test(o.$store.state.currentAccount)&&Object(Kt["k"])(o.userBalanceTokens.map((function(e){return e.token||""})),a).then((function(e){var t,i,n;o.userBalanceTokens=null===(t=o.userBalanceTokens)||void 0===t||null===(i=t.map)||void 0===i||null===(n=i.call(t,(function(t,i){return Object(et["a"])(Object(et["a"])({},t),{},{value:St["utils"].formatUnits(e[i],t.decimals||0)})})))||void 0===n?void 0:n.filter((function(e){return!!Number(e.value)}))}))}))},getTokenDetails:function(){var e=this;Promise.all([this.getToken2Info(),this.getToken1Info()]).then((function(){0===e.activeTab?e.allowance=e.token2.allowance||"0":e.allowance=e.token1.allowance||"0"}))},getToken2Info:function(){var e,t,i=this;return Object(Kt["L"])(null===(e=this.token2)||void 0===e?void 0:e.address,null===(t=this.token2)||void 0===t?void 0:t.chain,this.$f.getSwapContract(this.$store.getters.netId)).then(function(){var e=Object(Ze["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("token2",t),n=Object(et["a"])({},t),i.token2=Object(et["a"])(Object(et["a"])({},i.token2),n),sessionStorage.swap_token2=JSON.stringify(i.token2),i.limitToken2=Object(et["a"])(Object(et["a"])({},i.limitToken2),n),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},getToken1Info:function(){var e,t,i=this;return Object(Kt["L"])(null===(e=this.token1)||void 0===e?void 0:e.address,null===(t=this.token1)||void 0===t?void 0:t.chain,this.$f.getSwapContract(this.$store.getters.netId)).then(function(){var e=Object(Ze["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("token1",t),n=Object(et["a"])({},t),i.token1=Object(et["a"])(Object(et["a"])({},i.token1),n),sessionStorage.swap_token1=JSON.stringify(i.token1),i.limitToken1=Object(et["a"])(Object(et["a"])({},i.limitToken1),n),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},getBaseToken:function(){var e,t,i,n=this,o=(null===(e=this.$route.params)||void 0===e?void 0:e.id)||"",a=null===(t=o.split("-"))||void 0===t?void 0:t[0],s=null===(i=o.split("-"))||void 0===i?void 0:i[1];if(this.token1.address&&(a=this.token1.address),this.token1.chain&&(s=this.token1.chain),a&&s){var l=a+"-"+s,r=Vi["a"].get("chainConfig",Yt["l"])||{},c=null===r||void 0===r?void 0:r[s],u=null===c||void 0===c?void 0:c.wmainWrapper,d=null===c||void 0===c?void 0:c.mainName;a===Yt["k"]&&s&&u&&(l=u+"-"+s);var m=Object(Kt["D"])(l).then(function(){var e=Object(Ze["a"])(regeneratorRuntime.mark((function e(t){var i,o,s,r,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.baseToken=Object(et["a"])(Object(et["a"])({},t),a===Yt["k"]?{token:Object(et["a"])(Object(et["a"])({},t.token),{},{token:a,symbol:d,logoURI:n.$f.formatIcon(l)})}:{}),r=null===t||void 0===t||null===(i=t.pairs)||void 0===i?void 0:i[0],c=null===r||void 0===r?void 0:r.pair,u=null===r||void 0===r?void 0:r.chain,c&&n.getKlineHistory(c+"-"+u),n.token1=Object(et["a"])(Object(et["a"])(Object(et["a"])({},n.token1),{},{address:n.baseToken.token.token},n.baseToken.token),{},{decimals:(null===(o=n.baseToken.token)||void 0===o?void 0:o.decimal)||(null===(s=n.baseToken.token)||void 0===s?void 0:s.decimals)}),sessionStorage.swap_token1=JSON.stringify(n.token1),n.limitToken1=Object(et["a"])(Object(et["a"])({},n.limitToken1),{},{address:n.baseToken.token.token},n.baseToken.token),n.getLeftHeight(),n.limitPrice=n.baseToken.token.current_price_usd?n.$f.formatNumber(n.baseToken.token.current_price_usd):"",n.triggerPrice=n.baseToken.token.current_price_usd?n.$f.formatNumber(n.baseToken.token.current_price_usd):"",e.abrupt("return",t);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),p=Object(Kt["M"])(o).then(function(){var e=Object(Ze["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.baseTokenExtra=Object(et["a"])(Object(et["a"])({},t),{},{buy_tax:Number(Number(t.buy_tax).toFixed(2)),sell_tax:Number(Number(t.sell_tax).toFixed(2))}),n.handleTaxSlippage(),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());Promise.all([m,p]).finally((function(){n.$store.dispatch("initWs",l)}));var h=["0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee-eth","0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2-eth","0xdac17f958d2ee523a2206206994597c13d831ec7-eth","0x4fabb145d64652a948d72533023f6e7a623c7c53-eth","0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48-eth"];a===Yt["k"]||h.includes(o)?(this.hasMEVBot=!1,this.isHotToken=!1):Object(Kt["z"])(o).then((function(e){n.hasMEVBot=(null===e||void 0===e?void 0:e.has_MEVBot)||!1,n.isHotToken=(null===e||void 0===e?void 0:e.is_hot_token)||!1})).catch((function(e){n.hasMEVBot=!1,n.isHotToken=!1}))}},getSelectedRouter:function(e){this.dialogListRouterVisible=!1,this.selectedRouterIndex=e,this.selectedRouter()},getQuoteInfo:function(){var e,t,i,n,o=this,a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if("Swap"===this.$route.name&&this.supportChain())if(Number(this.fromAmount)||Number(this.toAmount))if(this.token1.address!==this.token2.address){Wi&&(clearTimeout(Wi),Wi=null);var s=this.$store.getters.netId||(null===(e=this.$route.params)||void 0===e||null===(t=e.id)||void 0===t||null===(i=t.split)||void 0===i||null===(n=i.call(t,"-"))||void 0===n?void 0:n[1])||"";Wi=setTimeout((function(){o.dealGetQuoteInfo(a,s)}),500)}else this.$toast({position:"top",message:this.$t("twoIdenticalTokens")});else this.quoteLoading=!1},dealGetQuoteInfo:function(e,t){var i=this;if((this.fromAmount||this.toAmount)&&this.fromToken.address&&this.toToken.address){var n,o=this.fromToken.decimals,a=this.toToken.decimals;if("solana"===t)return void this.quoteSolana(e,t);this.quoteLoading=!0;var s={from_token:this.fromToken.address,to_token:this.toToken.address,amountIn:e?St["utils"].parseUnits(new Si.a(this.fromAmount||0).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(o,"})?")))[0],o).toString():0,amountOut:e?0:St["utils"].parseUnits(new Si.a(this.toAmount||0).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(a,"})?")))[0],a).toString()},l=null===(n=this.baseToken)||void 0===n?void 0:n.pairs,r="";if("core"===t&&(null===l||void 0===l?void 0:l.length)>0){var c;console.log("pairs",l);var u=(null===l||void 0===l||null===(c=l.find)||void 0===c?void 0:c.call(l,(function(e){var t=[e.token0_address,e.token1_address];return t.includes(s.token0_address)||t.includes(s.token1_address)})))||(null===l||void 0===l?void 0:l[0]),d=null===u||void 0===u?void 0:u.amm,m={shadowswap:"0x191e94fa59739e188dce837f7f6978d84727ad01"};r=(null===m||void 0===m?void 0:m[d])||"0x40375c92d9faf44d2f9db9bd9ba41a3317a2404f",console.log("wrapper",r)}Object(Kt["V"])(s,r,t).then((function(e){i.swapPathList=e,i.selectedRouter(e),i.getSwapGas()})).catch((function(t){i.$f.handleError(t),e?i.toAmount="":i.fromAmount="",i.$nextTick((function(){setTimeout((function(){i.quoteLoading=!1,i.countDownFinishReset()}),800)}))}))}},quoteSolana:function(e,t){var i=this;if("solana"===t){var n=this.fromToken.decimals,o=this.toToken.decimals;console.log("fromAmount",this.fromAmount,this.fromToken),console.log("toToken",this.toToken);var a={inputMint:this.fromToken.address,inputDecimals:n,inputMintSymbol:this.fromToken.symbol,inputMintName:this.fromToken.symbol,inputAmount:this.fromAmount||0,outputMint:this.toToken.address,outputDecimals:o,outputMintSymbol:this.toToken.symbol,outputMintName:this.toToken.symbol,amount:e?St["utils"].parseUnits(new Si.a(this.fromAmount||0).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(n,"})?")))[0],n).toString():St["utils"].parseUnits(new Si.a(this.toAmount||0).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(o,"})?")))[0],o).toString(),slippageBps:new Si.a(this.slippage).times(100).toFixed(0),swapMode:e?"ExactIn":"ExactOut",slippage:this.slippage||2},s=this.quoteSolanaPreParams.amount&&Object.keys(this.quoteSolanaPreParams).every((function(e){return a[e]===i.quoteSolanaPreParams[e]}));if(s)return;this.quoteSolanaPreParams=Object(et["a"])({},a),setTimeout((function(){i.quoteSolanaPreParams={}}),15e3),this.quoteLoading=!0,Object(Ci["e"])(a).then((function(t){var a,s,l,r,c,u,d,m;(console.log("solanaQuoteResponse",t),t.routeInfo&&t.transaction)?(i.solanaQuoteResponse=t,console.log("amountOut",(null===(a=t.routeInfo)||void 0===a||null===(s=a.amountOut)||void 0===s||null===(l=s.amount)||void 0===l?void 0:l.toFixed())||"0"),i.toAmount=(null===(r=t.routeInfo)||void 0===r||null===(c=r.amountOut)||void 0===c||null===(u=c.amount)||void 0===u?void 0:u.toFixed())||"0",i.quoteSwapTokenPrice()):e?t.outAmount?(i.solanaQuoteResponse=t,i.toAmount=St["utils"].formatUnits(t.outAmount||"0",o||(null===(d=i.toToken)||void 0===d?void 0:d.decimals)),i.quoteSwapTokenPrice()):i.$f.handleError("can not get quote"):t.inAmount?(i.solanaQuoteResponse=t,i.fromAmount=St["utils"].formatUnits(t.inAmount||"0",n||(null===(m=i.fromToken)||void 0===m?void 0:m.decimals)),i.quoteSwapTokenPrice()):i.$f.handleError("can not get quote");i.quoteLoading=!1,i.quoteSolanaPreParams={}})).catch((function(e){console.log(e),i.$f.handleError((null===e||void 0===e?void 0:e.error)||e),i.$nextTick((function(){setTimeout((function(){i.quoteLoading=!1,i.quoteSolanaPreParams={},i.countDownFinishReset()}),800)}))}))}},quoteSwapTokenPrice:function(){var e=this,t=this.fromToken.chain,i=this.fromToken.address+"-"+t,n=this.toToken.address+"-"+t;return Object(Kt["O"])([i,n]).then(function(){var t=Object(Ze["a"])(regeneratorRuntime.mark((function t(i){var n,o,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=(null===i||void 0===i||null===(n=i[0])||void 0===n?void 0:n.current_price_usd)||0,s=(null===i||void 0===i||null===(o=i[1])||void 0===o?void 0:o.current_price_usd)||0,e.solanaSwapTokenPrice=[a,s];case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},selectedRouter:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.swapPathList,i=t[this.selectedRouterIndex],n=t[this.selectedRouterIndex].routerPath,o=this.isAmount,a=this.fromToken.decimals,s=this.toToken.decimals,l=!1;if(o){var r,c=St["utils"].parseUnits(new Si.a(this.fromAmount||0).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(a,"})?")))[0],a).toString(),u=(null===(r=n[0])||void 0===r?void 0:r.amount)||0;l=c===u}else{var d,m=St["utils"].parseUnits(new Si.a(this.toAmount||0).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(s,"})?")))[0],s).toString(),p=(null===(d=n[n.length-1])||void 0===d?void 0:d.amount)||0;l=m===p}if(l){if(1===i.from_cannot_sell_all){var h,b=new Si.a(St["utils"].parseUnits(String(this.fromToken.balance),null===(h=this.fromToken)||void 0===h?void 0:h.decimals).toString()),v=new Si.a(null===i||void 0===i?void 0:i.routerPath[0].amount);this.isCannotSellAll=b.gt(0)&&v.div(b).gt(.99999)}else this.isCannotSellAll=!1;this.isTax=i.totalTax>0||i.total_sell_tax>0||i.total_buy_tax>0;var f=this.getPriceImpact(i);if(this.isTax||f.gt(.5)){this.isTaxHigh=i.total_sell_tax+i.total_buy_tax+1>49.99;var g=i.totalTax||i.total_sell_tax+i.total_buy_tax,k=Number(f);if(this.autoSlippage){var O=g+k+(g>5||k>5?2.5:2);console.log("swapPathList",t),O=Math.max(Math.min(O,49.99),.5),this.autoSlippageValue=String(Number(O.toFixed(2)))}}else this.isTaxHigh=!1,"auto"===this.customSlippage&&(this.autoSlippageValue=tn);if((i.weight>5e4||i.totalTax>0||i.total_sell_tax>0||i.total_buy_tax>0)&&!this.hasMEVBot?this.autoSwapMode="fast":0===this.activeTab?this.autoSwapMode="protect":this.autoSwapMode="private",console.log("autoSwapMode",this.autoSwapMode),this.swapQuoteInfo=i,this.swapRouterPath=n.map((function(e,t){var n,o;return{symbol:e.symbol,nextAmm:(null===i||void 0===i||null===(n=i.pair_path)||void 0===n||null===(o=n[t])||void 0===o?void 0:o.amm)||""}})),this.listRouter=t.map((function(t){var i=0,n=0;if(o){var a,s=t.routerPath[t.routerPath.length-1];i=St["utils"].formatUnits(s.amount||"0",(null===s||void 0===s?void 0:s.decimals)||(null===(a=e.toToken)||void 0===a?void 0:a.decimals))}else{var l=t.routerPath[0];n=St["utils"].formatUnits(l.amount||"0",(null===l||void 0===l?void 0:l.decimals)||e.fromToken.decimals)}var r=t.routerPath.map((function(e,i){var n,o;return{symbol:e.symbol,nextAmm:(null===t||void 0===t||null===(n=t.pair_path)||void 0===n||null===(o=n[i])||void 0===o?void 0:o.amm)||""}}));return{path:r,amount:o?i:n,priceImpact:t.priceImpact}})),o){var w,j=n[n.length-1];this.toAmount=St["utils"].formatUnits(j.amount||"0",(null===j||void 0===j?void 0:j.decimals)||(null===(w=this.toToken)||void 0===w?void 0:w.decimals))}else{var T,S=n[0];this.fromAmount=St["utils"].formatUnits(S.amount||"0",(null===S||void 0===S?void 0:S.decimals)||(null===(T=this.fromToken)||void 0===T?void 0:T.decimals))}var y=i.totalTax||i.total_sell_tax+i.total_buy_tax||0;this.baseTokenPrice=new Si.a(this.toAmount).div(this.fromAmount).times(100-y).div(100).toFixed(),l&&this.$nextTick((function(){setTimeout((function(){e.quoteLoading=!1,e.countDownFinishReset()}),800)}))}},handleSelectToken2:function(e){sessionStorage.swap_token2=JSON.stringify(e),this.swapRouterPath=[],this.swapQuoteInfo.totalTax=0,this.swapQuoteInfo.total_sell_tax=0,this.swapQuoteInfo.total_buy_tax=0,this.autoSlippageValue=tn,this.baseTokenPrice=0,this.selectedRouterIndex=0,this.fromAmount="",this.toAmount="",this.getAllowance(),this.getToken2Info()},handleSelectToken1:function(e){sessionStorage.swap_token1=JSON.stringify(e),this.swapRouterPath=[],this.swapQuoteInfo.totalTax=0,this.swapQuoteInfo.total_sell_tax=0,this.swapQuoteInfo.total_buy_tax=0,this.autoSlippageValue=tn,this.baseTokenPrice=0,this.selectedRouterIndex=0,this.fromAmount="",this.toAmount="",this.getToken1Info(),this.$router.replace({name:"Swap",params:{id:((null===e||void 0===e?void 0:e.address)||(null===e||void 0===e?void 0:e.token))+"-"+e.chain,type:this.$route.params.type||""}})},handleSelectLimitToken1:function(e){this.autoSlippageValue=tn,this.limitAmount1="",this.limitAmount2="",this.$refs.percentStep1.handleClick(0),1===this.activeTab&&this.getLimitAllowance(),sessionStorage.swap_token1=JSON.stringify(e),this.token1=Object(et["a"])({},e),this.$router.replace({name:"Swap",params:{id:((null===e||void 0===e?void 0:e.address)||(null===e||void 0===e?void 0:e.token))+"-"+e.chain,type:this.$route.params.type||""}}).catch((function(e){console.log("err",e)})),this.getToken1Info()},handleSelectLimitToken2:function(e){this.autoSlippageValue=tn,this.limitAmount1="",this.limitAmount2="",this.$refs.percentStep1.handleClick(0),sessionStorage.swap_token2=JSON.stringify(e),this.token2=Object(et["a"])({},e),this.getToken2Info(),0===this.activeTab&&this.getLimitAllowance()},getAllowance:function(){var e=this;if(this.$store.getters.netId&&this.$store.getters.netId===this.fromToken.chain&&this.fromToken.address){var t=this.$store.getters.netId;if("solana"===t)return void(this.allowance=Yt["i"]);var i=this.$f.getSwapContract(this.$store.getters.netId);this.loadingAllowance=!0,Object(Kt["d"])(this.fromToken.address,i).then((function(t){e.allowance=t.toString()})).finally((function(){e.loadingAllowance=!1}))}},approve:function(){var e=this;return Object(Ze["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loadingApprove=!0,"bsc"!==e.$store.getters.netId&&"eth"!==e.$store.getters.netId||e.$f.setSwapSendType("fast"),Object(Kt["g"])(e.fromToken.address).then((function(e){return e.wait()})).then((function(t){console.log(t),e.getAllowance(),e.getGasBalance()})).catch((function(t){e.$f.handleError(t)})).finally((function(){e.loadingApprove=!1,e.$f.setSwapSendType("")}));case 3:case"end":return t.stop()}}),t)})))()},getSwapGas:function(){var e=this;Ji&&(clearTimeout(Ji),Ji=null),Ji=setTimeout((function(){var t,i;e.checkAmount()&&e.isApprove&&e.$store.state.currentAccount&&!e.loadingSwap&&(null===(t=e.swapQuoteInfo)||void 0===t||null===(i=t.routerPath)||void 0===i?void 0:i.length)>0&&(Object(Kt["ab"])(e.swapQuoteInfo,e.slippage).then(function(){var t=Object(Ze["a"])(regeneratorRuntime.mark((function t(i){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.swapSubmitInfo=i,e.swapInfo=i.swapInfo,e.swapInfo.gasValue=i.gasValue,console.log("gasValue",i.gasValue),e.swapInfo.swapRouterPath=e.swapRouterPath;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$f.handleError(t)})),e.getNativeTokenPrice(),e.getGasPrice())}),1e3)},getSwapTx:function(){var e,t,i=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(Ji&&(clearTimeout(Ji),Ji=null),this.checkAmount())if("solana"===this.chain){var o=[this.fromToken,this.toToken].map((function(e,t){return{symbol:e.symbol,nextAmm:""}}));this.swapInfo={swapRouterPath:o,fromAmount:this.fromAmount,toAmount:this.toAmount,fromToken:this.fromToken,toToken:this.toToken},this.dialogVisibleSwap=!0}else(null===(e=this.swapQuoteInfo)||void 0===e||null===(t=e.routerPath)||void 0===t?void 0:t.length)>0&&(this.loadingSwap=!0,Object(Kt["ab"])(this.swapQuoteInfo,this.slippage,this.activeTab).then(function(){var e=Object(Ze["a"])(regeneratorRuntime.mark((function e(t){var o,a,s,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i.swapSubmitInfo=t,i.swapInfo=t.swapInfo,i.swapInfo.gasValue=t.gasValue,i.swapInfo.swapRouterPath=i.swapRouterPath,i.swapInfo.subTxs=t.subTxs,i.loadingSwap=!1,n&&(l=(null===(o=window)||void 0===o||null===(a=o._tw_)||void 0===a||null===(s=a.appGetFreePay)||void 0===s?void 0:s.call(a))||!1,l=l&&"false"!==l,l?i.submitSwap():i.dialogVisibleSwap=!0);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){i.loadingSwap=!1,i.$f.handleError(e)})),this.getNativeTokenPrice(),this.getGasPrice());else this.$dialog.alert({title:this.$t("tips"),message:this.checkAmountMessage(),confirmButtonText:this.$t("okay"),confirmButtonColor:"#558BED"})},submitSwap:function(){var e=arguments,t=this;return Object(Ze["a"])(regeneratorRuntime.mark((function i(){var n,o,a,s,l,r;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(n=e.length>0&&void 0!==e[0]?e[0]:t.swapSubmitInfo,i.prev=1,"solana"!==t.chain){i.next=5;break}return t.submitSolanaSwap(),i.abrupt("return");case 5:return t.loadingConfirmSwap=!0,t.loadingSwap=!0,console.log("swapSubmitInfo",n),i.next=10,n.swapCallStatic();case 10:o=i.sent,console.log("swapCallStaticResult",o.toString()),a=n.swapInfo,s=!(a.fromToken.isWrapper&&a.toToken.isETH||a.toToken.isWrapper&&a.fromToken.isETH),console.log("isSwap",s),l={from_address:a.fromToken.address,from_symbol:a.fromToken.symbol,from_amount:Number(St["utils"].formatUnits(a.fromTokenAmount||0,a.fromToken.decimals)),to_address:a.toToken.address,to_symbol:a.toToken.symbol,to_amount:Number(St["utils"].formatUnits(a.toTokenAmount||0,a.toToken.decimals)),chain:t.netId,transaction:"",wallet_address:t.$store.state.currentAccount},r={},"bsc"!==t.$store.getters.netId&&"eth"!==t.$store.getters.netId||(console.log("set swapMode",t.swapMode||"fast"),t.$f.setSwapSendType(t.swapMode||"fast")),n.swap().then((function(e){var i,o,c;console.warn("swap confirm time end",t.$f.formatDate(Date.now())),console.log("---confirm transaction---",e),t.swapInfo.transaction=e.hash,s&&(l.transaction=e.hash,r={time:parseInt(Date.now()/1e3),id:l.transaction,chain:t.netId,transaction:e.hash,from_address:l.from_address,from_price_eth:0,from_price_usd:"",from_symbol:a.fromToken.symbol,from_amount:Number(St["utils"].formatUnits(a.fromTokenAmount||0,a.fromToken.decimals)),to_address:l.to_address,to_price_eth:0,to_price_usd:"",to_symbol:a.toToken.symbol,to_amount:Number(St["utils"].formatUnits(a.toTokenAmount||0,a.toToken.decimals)),is_merged:0},t.initTxs.unshift(r)),t.loadingSwap=!1,t.loadingConfirmSwap=!1,t.fromAmount="",t.toAmount="",null===(i=t.$refs)||void 0===i||null===(o=i.percentStep)||void 0===o||null===(c=o.handleClick)||void 0===c||c.call(o,0),t.dialogVisibleSwap=!1;try{Object(Kt["f"])(n.subTxs)}catch(u){console.log(u)}return e.wait()})).then((function(e){return console.warn("swap transaction end",t.$f.formatDate(Date.now())),console.log("----transaction---",e),1===e.status?(t.$notify({type:"success",message:t.$t("tradeSuccess")}),t.getTokenDetails(),t.getUserTokenList(),t.getAllowance(),s&&(t.initTxs.forEach((function(t){t.transaction===e.transactionHash&&(t.is_merged=1,t.time=parseInt(Date.now()/1e3))})),t.getUserAllTxs(r)),t.getGasBalance()):(t.$notify({type:"danger",message:t.$t("tradeFail")}),s&&(t.initTxs=t.initTxs.filter((function(t){return t.transaction!==e.transactionHash})))),t.$f.setSwapSendType(""),e})).catch((function(e){t.$refs.countDown.reset(),t.loadingSwap=!1,t.loadingConfirmSwap=!1,s&&t.getUserAllTxs(),t.$f.handleError(e,"swap"),t.$f.setSwapSendType("")})),i.next=27;break;case 21:i.prev=21,i.t0=i["catch"](1),t.loadingSwap=!1,t.loadingConfirmSwap=!1,t.$f.handleError(i.t0,"swap"),t.$f.setSwapSendType("");case 27:case"end":return i.stop()}}),i,null,[[1,21]])})))()},submitSolanaSwap:function(){var e=this;return Object(Ze["a"])(regeneratorRuntime.mark((function t(){var i,n,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{e.loadingConfirmSwap=!0,e.loadingSwap=!0,i=e.swapInfo,n={from_address:i.fromToken.address,from_symbol:i.fromToken.symbol,from_amount:Number(St["utils"].formatUnits(i.fromTokenAmount||0,i.fromToken.decimals)),to_address:i.toToken.address,to_symbol:i.toToken.symbol,to_amount:Number(St["utils"].formatUnits(i.toTokenAmount||0,i.toToken.decimals)),chain:e.netId,transaction:"",wallet_address:e.$store.state.currentAccount},o={},setTimeout((function(){e.dialogVisibleSwap||(e.loadingSwap=!1,e.loadingConfirmSwap=!1)}),6e3),a=!0,Object(Ci["h"])(e.solanaQuoteResponse).then((function(t){var s,l,r,c,u;(console.warn("swap confirm time end",e.$f.formatDate(Date.now())),console.log("---confirm transaction---",t),e.swapInfo.transaction=t.hash,a)&&(n.transaction=t.hash,o={time:parseInt(Date.now()/1e3),id:n.transaction,chain:e.netId,transaction:t.hash,from_address:n.from_address,from_price_eth:0,from_price_usd:"",from_symbol:i.fromToken.symbol,from_amount:i.fromAmount,to_address:n.to_address,to_price_eth:0,to_price_usd:"",to_symbol:i.toToken.symbol,to_amount:i.toAmount,is_merged:0,wallet_address:e.$store.state.currentAccount||""},e.solanaTxs.unshift(o),e.solanaTxs=null===(c=e.solanaTxs)||void 0===c||null===(u=c.slice)||void 0===u?void 0:u.call(c,0,500));return e.loadingSwap=!1,e.loadingConfirmSwap=!1,e.fromAmount="",e.toAmount="",null===(s=e.$refs)||void 0===s||null===(l=s.percentStep)||void 0===l||null===(r=l.handleClick)||void 0===r||r.call(l,0),e.dialogVisibleSwap=!1,t.wait()})).then((function(t){if(console.warn("swap transaction end",e.$f.formatDate(Date.now())),console.log("----transaction---",t),t){var n=Object(Ci["g"])(t,i.fromToken.address,i.toToken.address),o=Object(it["a"])(n,2),s=o[0],l=o[1];e.$notify({type:"success",message:e.$t("tradeSuccess")}),e.getTokenDetails(),e.getUserTokenList(),a&&(e.solanaTxs=e.solanaTxs.slice().map((function(e){var i,n=Object(et["a"])({},e);return e.transaction===(null===t||void 0===t||null===(i=t.transaction)||void 0===i?void 0:i.signatures[0])&&(n.is_merged=1,n.time=null===t||void 0===t?void 0:t.blockTime,s&&Number(s)>0&&(n.from_amount=s),l&&Number(l)>0&&(n.to_amount=l)),Date.now()-6e5>1e3*Number(n.time)&&(n.is_merged=1),n})))}else e.$notify({type:"danger",message:e.$t("tradeFail")}),a&&(e.solanaTxs=e.solanaTxs.filter((function(e){return e.transaction!==t.transactionHash})));return e.$f.setSwapSendType(""),t})).catch((function(t){var i,o;e.solanaTxs=(null===(i=e.solanaTxs)||void 0===i||null===(o=i.filter)||void 0===o?void 0:o.call(i,(function(e){return e.transaction!==n.transaction})))||[],e.$refs.countDown.reset(),e.loadingSwap=!1,e.loadingConfirmSwap=!1,e.$f.handleError(t,"swap"),e.$f.setSwapSendType("")}))}catch(s){e.loadingSwap=!1,e.loadingConfirmSwap=!1,e.$f.handleError(s,"swap"),e.$f.setSwapSendType("")}case 1:case"end":return t.stop()}}),t)})))()},checkAmount:function(){if(""===this.$store.state.wallet||"importAddress"===this.$store.state.wallet)return!0;var e=this.fromToken.balance||0;return!(0===Number(e)||Number(e)<Number(this.fromAmount)||""===this.$store.state.wallet||"0"===String(this.fromAmount)||this.token1.address===this.token2.address)},checkAmountMessage:function(){var e=this.fromToken.balance||0;return this.$store.state.currentAccount?this.$store.state.currentAccount&&!window.ethereum?this.$t("observeAddressNotSwap"):0===Number(e)||Number(e)<Number(this.fromAmount)||!this.$store.state.currentAccount?this.$t("insufficientBalance"):"0"===String(this.fromAmount)?this.$t("AmountCannotBeZero"):void 0:this.$t("pConnectWallet")},getNativeTokenPrice:function(){var e,t,i,n,o,a,s,l,r=this;if(this.$store.getters.netId===(null===(e=this.$route.params)||void 0===e||null===(t=e.id)||void 0===t||null===(i=t.split)||void 0===i||null===(n=i.call(t,"-"))||void 0===n?void 0:n[1])){var c=this.$store.getters.netId||(null===(o=this.$route.params)||void 0===o||null===(a=o.id)||void 0===a||null===(s=a.split)||void 0===s||null===(l=s.call(a,"-"))||void 0===l?void 0:l[1])||"";Object(Kt["E"])(c).then((function(e){var t;r.nativePrice=e;var i=(null===(t=r.gasSetting)||void 0===t?void 0:t[c])||{};r.gasSetting=Object(et["a"])(Object(et["a"])({},r.gasSetting),{},Object(Xe["a"])({},c,Object(et["a"])(Object(et["a"])({},i),{},{nativePrice:e}))),Vi["a"].set("gasSetting",r.gasSetting)}))}},getKlineHistory:function(e){var t,i,n,o,a=this;Object(Kt["A"])(e,"1",(null===(t=this.$route.params)||void 0===t||null===(i=t.id)||void 0===i||null===(n=i.split)||void 0===n||null===(o=n.call(i,"-"))||void 0===o?void 0:o[1])||"").then((function(e){var t,i=(null===e||void 0===e||null===(t=e.slice)||void 0===t?void 0:t.call(e,-10))||[];a.dataX=i.map((function(e){return e.time})),a.dataY=i.map((function(e){return e.close}))}))},getUserAllTxs:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=this.$store.state.currentAccount;i&&(this.txsLoading=!0,Object(Kt["Q"])().then((function(i){var n,o,a,s,l=Array.isArray(i)?i:[],r=t&&!(null!==l&&void 0!==l&&null!==(n=l.some)&&void 0!==n&&n.call(l,(function(e){return e.transaction===t.transaction})))&&Date.now()-1e3*t.time<6e5;r&&setTimeout((function(){e.getUserAllTxs(t)}),1e4),l.length>0&&(e.initTxs=(null===l||void 0===l?void 0:l.map((function(e){return e.id?Object(et["a"])({},e):Object(et["a"])(Object(et["a"])({},e),{},{id:e.transaction})})))||[]),!r||null!==(o=(a=e.initTxs).some)&&void 0!==o&&o.call(a,(function(e){return e.transaction===t.transaction}))||e.initTxs.unshift(t);var c=[],u={};null===l||void 0===l||null===(s=l.forEach)||void 0===s||s.call(l,(function(e){u[e.from_address]||(c.push({address:e.from_address,symbol:e.from_symbol,chain:e.chain}),u[e.from_address]=!0),u[e.to_address]||(c.push({address:e.to_address,symbol:e.to_symbol,chain:e.chain}),u[e.to_address]=!0)})),e.txsTokens=c,sessionStorage.txsTokens=JSON.stringify(c||[])})).finally((function(){e.txsLoading=!1})))},alertTips:function(e,t){this.$dialog.alert({title:e,message:t,confirmButtonText:this.$t("getIt"),confirmButtonColor:"#558BED"}).then((function(){}))},alertSupportChainTips:function(e){var t,i,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n?this.$dialog.confirm({title:"",message:e,confirmButtonText:null!==(t=window)&&void 0!==t&&null!==(i=t._tw_)&&void 0!==i&&i.appSwitchChain?this.$t("switchChain"):this.$t("getIt"),confirmButtonColor:"#558BED",cancelButtonText:this.$t("cancel")}).then((function(){var e,t,i,n;null!==(e=window)&&void 0!==e&&null!==(t=e._tw_)&&void 0!==t&&t.appSwitchChain&&(null===(i=window)||void 0===i||null===(n=i._tw_)||void 0===n||n.appSwitchChain())})):this.$dialog.alert({title:"",message:e,confirmButtonText:this.$t("getIt"),confirmButtonColor:"#558BED"})},supportChain:function(){if("Swap"===this.$route.name){var e,t,i,n,o,a,s,l,r,c,u,d,m,p,h,b=this.$store.getters.netId||(null===(e=this.$route.params)||void 0===e||null===(t=e.id)||void 0===t||null===(i=t.split)||void 0===i||null===(n=i.call(t,"-"))||void 0===n?void 0:n[1])||"",v=Object.keys(Yt["w"]),f=Vi["a"].get("chainConfig",Yt["l"])||{},g=null===v||void 0===v||null===(o=v.map)||void 0===o||null===(a=o.call(v,(function(e){var t;return null===f||void 0===f||null===(t=f[e])||void 0===t?void 0:t.name})))||void 0===a||null===(s=a.join)||void 0===s?void 0:s.call(a,", "),k=null===f||void 0===f||null===(l=f[b])||void 0===l?void 0:l.name;if("solana"===b)return!0;if(!this.$store.getters.netId&&this.$store.state.chainId)return this.alertSupportChainTips(this.$t("notYetSupportedChainTips",{chains:g}),!0),!1;if(null!==(r=this.$store.state.currentAccount)&&void 0!==r&&null!==(c=r.startsWith)&&void 0!==c&&c.call(r,"T"))return this.alertSupportChainTips(this.$t("notYetSupportedChainTips1",{chain:"TRON",chains:g})),!1;if(b&&(null===v||void 0===v||null===(u=v.includes)||void 0===u||!u.call(v,b)))return this.alertSupportChainTips(this.$t("notYetSupportedChainTips1",{chain:k,chains:g}),!0),!1;if((null===(d=this.$route.params)||void 0===d||null===(m=d.id)||void 0===m||null===(p=m.split)||void 0===p||null===(h=p.call(m,"-"))||void 0===h?void 0:h[1])!==this.$store.getters.netId&&this.$store.getters.netId)return this.alertSupportChainTips(this.$t("chainNotSame"),!0),!1}return!0},getGasPrice:function(){var e,t,i,n,o,a,s,l,r,c=this,u=this.$store.getters.netId||(null===(e=this.$route.params)||void 0===e||null===(t=e.id)||void 0===t||null===(i=t.split)||void 0===i||null===(n=i.call(t,"-"))||void 0===n?void 0:n[1])||"";null===(o=window)||void 0===o||null===(a=o.trustwallet)||void 0===a||!a.solana||null!==(s=window.ethereum)&&void 0!==s&&null!==(l=s.address)&&void 0!==l&&null!==(r=l.startsWith)&&void 0!==r&&r.call(l,"0x")||!window.ethereum.address||(u="solana"),"solana"!==u&&Object(Kt["w"])(u).then((function(e){var t,i,n=e.toString();"bsc"===u&&null!==e&&void 0!==e&&null!==(t=e.lt)&&void 0!==t&&t.call(e,"3000000000")&&(n="3000000000"),c.gasPrice=n;var o=(null===(i=c.gasSetting)||void 0===i?void 0:i[u])||{};c.gasSetting=Object(et["a"])(Object(et["a"])({},c.gasSetting),{},Object(Xe["a"])({},u,Object(et["a"])(Object(et["a"])({},o),{},{gasPrice:n}))),Vi["a"].set("gasSetting",c.gasSetting)})).catch((function(e){console.log(e),c.gasPrice="0","bsc"===u&&(c.gasPrice="3000000000")}))},getPriceImpact:function(e){if(!Number(this.fromAmount)&&!Number(this.toAmount))return new Si.a(0);var t=e.routerPath,i=(null===t||void 0===t?void 0:t.length)>0?null===t||void 0===t?void 0:t[0]:null,n=(null===t||void 0===t?void 0:t.length)>0?null===t||void 0===t?void 0:t[t.length-1]:null;if(i&&n){var o=e.from_price,a=e.to_price,s=St["utils"].formatUnits(i.amount,i.decimals),l=St["utils"].formatUnits(n.amount,n.decimals);return new Si.a(s).times(o).div(new Si.a(l).times(a)).minus(1).abs().times(100)}return new Si.a(0)},goAudit:function(){this.$f.openBrowser("https://beosin.com/audits/SwapFinder_202209021725.pdf")},onCountDownFinish:function(){2===this.selected&&this.token1.address!==this.token2.address&&(this.loadingConfirmSwap||this.loadingApprove||"hidden"===document.visibilityState?this.$refs.countDown.reset():this.isAmount?this.watchFromAmount():this.watchToAmount())},countDownFinishReset:function(){this.$refs.countDown.reset(),this.dialogVisibleSwap&&this.isApprove&&!this.loadingConfirmSwap&&this.getSwapTx(!1)},appSwitchChain:function(e){var t,i,n,o;null!==(t=window)&&void 0!==t&&null!==(i=t._tw_)&&void 0!==i&&i.appSwitchChain&&(null===(n=window)||void 0===n||null===(o=n._tw_)||void 0===o||o.appSwitchChain(),e.stopPropagation())},formatPriceImpactColor:function(e){return e>40?"#F81111":e>10?"#F7933F":e>5?"#f8be46":""},goLiquidity:function(){var e,t;if(null!==(e=window)&&void 0!==e&&null!==(t=e._tw_)&&void 0!==t&&t.openLp){var i,n,o,a,s,l,r=Vi["a"].get("chainConfig",Yt["l"])||{},c=this.$store.getters.netId||(null===(i=this.$route.params)||void 0===i||null===(n=i.id)||void 0===n||null===(o=n.split)||void 0===o||null===(a=o.call(n,"-"))||void 0===a?void 0:a[1])||"",u=null===r||void 0===r?void 0:r[c],d=null===u||void 0===u?void 0:u.wmainWrapper,m=null===(s=r[c])||void 0===s?void 0:s.swaps,p=null===(l=this.baseToken)||void 0===l?void 0:l.pairs,h=p.find((function(e){return m.some((function(t){return t.name===e.amm&&t.router_address}))}));if(h){var b,v,f=h.token0_address===d?Yt["k"]:h.token0_address,g=h.token1_address===d?Yt["k"]:h.token1_address,k=h.amm;null===(b=window)||void 0===b||null===(v=b._tw_)||void 0===v||v.openLp(f,g,k)}else{var O,w,j,T,S=this.tokenInfo.address||(null===(O=this.baseToken)||void 0===O||null===(w=O.token)||void 0===w?void 0:w.token)||"";S=S===d?Yt["k"]:S,null===(j=window)||void 0===j||null===(T=j._tw_)||void 0===T||T.openLp(S,"","")}}},checkLimitAmount:function(){var e=0===this.activeTab?this.limitToken2:this.limitToken1;if(e.address===Yt["k"]&&3===this.selected)return!1;var t=e.balance||0,i=0===this.activeTab?this.limitAmount2:this.limitAmount1;return!(0===Number(t)||Number(t)<Number(i)||""===this.$store.state.wallet||"0"===String(i)||this.limitToken1.address===this.limitToken2.address)},checkLimitAmountMessage:function(){var e=0===this.activeTab?this.limitToken2:this.limitToken1;if(e.address===Yt["k"]&&3===this.selected)return this.$t("noSNativeToken");var t=e.balance||0,i=0===this.activeTab?this.limitAmount2:this.limitAmount1;return this.$store.state.currentAccount?this.$store.state.currentAccount&&!window.ethereum?this.$t("observeAddressNotSwap"):Number(0===t||Number(t)<Number(i)||""===this.$store.state.wallet)?this.$t("insufficientBalance"):"0"===String(i)?this.$t("AmountCannotBeZero"):"":this.$t("pConnectWallet")},getLimitAllowance:function(){var e=this,t=0===this.activeTab?this.limitToken2:this.limitToken1;if(this.$store.getters.netId&&this.$store.getters.netId===t.chain&&t.address){var i=t.chain||this.$store.getters.netId;if("solana"===i)return;var n=Yt["s"][i];this.loadingLimitAllowance=!0,Object(Kt["d"])(t.address,n).then((function(t){e.limitAllowance=t.toString(),console.log("limitAllowance",e.limitAllowance)})).finally((function(){e.loadingLimitAllowance=!1}))}},getLimitOrder:function(){var e=this;if(this.$store.getters.netId){var t=this.limitToken1.chain||this.$store.getters.netId||"bsc";this.loadingGetLimitOrder=!0,Object(Kt["B"])({chain:t}).then((function(t){e.limitOrders=t})).finally((function(){setTimeout((function(){e.loadingGetLimitOrder=!1}),800)}))}},refreshLimit:function(e){this.getLimitOrder(),e.from_token===Yt["k"]&&(e.from_token===this.limitToken1.address?this.getToken1Info():e.from_token===this.limitToken2.address&&this.getToken2Info())},approveLimit:function(){var e=this;return Object(Ze["a"])(regeneratorRuntime.mark((function t(){var i,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.supportChainLimit()){t.next=2;break}return t.abrupt("return");case 2:e.loadingLimitApprove=!0,i=e.limitToken1.chain||e.$store.getters.netId||"bsc",n=Yt["s"][i],o=0===e.activeTab?e.limitToken2:e.limitToken1,"bsc"!==e.$store.getters.netId&&"eth"!==e.$store.getters.netId||e.$f.setSwapSendType("fast"),Object(Kt["g"])(o.address,n).then((function(e){return e.wait()})).then((function(t){console.log(t),e.getLimitAllowance(),e.getGasBalance()})).catch((function(t){e.$f.handleError(t)})).finally((function(){e.loadingLimitApprove=!1,e.$f.setSwapSendType("")}));case 8:case"end":return t.stop()}}),t)})))()},supportChainLimit:function(){if("Swap"===this.$route.name){var e,t,i,n,o,a,s,l,r,c,u,d,m,p=this.$store.getters.netId||(null===(e=this.$route.params)||void 0===e||null===(t=e.id)||void 0===t||null===(i=t.split)||void 0===i||null===(n=i.call(t,"-"))||void 0===n?void 0:n[1])||"",h=Object.keys(Yt["s"]),b=Vi["a"].get("chainConfig",Yt["l"])||{},v=h.map((function(e){return b[e].name})).join(", ");if(null!==(o=this.$store.state.currentAccount)&&void 0!==o&&null!==(a=o.startsWith)&&void 0!==a&&a.call(o,"T")||p&&(null===h||void 0===h||null===(s=h.includes)||void 0===s||!s.call(h,p))){this.$t("notYetSupportedChainNoGasTips",{chains:v});return this.$toast({message:this.$t("notYetSupportedChainLimitTips",{chains:v}),position:"top"}),!1}if((null===(l=this.$route.params)||void 0===l||null===(r=l.id)||void 0===r||null===(c=r.split)||void 0===c||null===(u=c.call(r,"-"))||void 0===u?void 0:u[1])!==this.$store.getters.netId&&this.$store.getters.netId)return this.$dialog.confirm({title:"",message:this.$t("chainNotSame"),confirmButtonText:null!==(d=window)&&void 0!==d&&null!==(m=d._tw_)&&void 0!==m&&m.appSwitchChain?this.$t("switchChain"):this.$t("getIt"),confirmButtonColor:"#558BED",cancelButtonText:this.$t("cancel")}).then((function(){var e,t,i,n;null!==(e=window)&&void 0!==e&&null!==(t=e._tw_)&&void 0!==t&&t.appSwitchChain&&(null===(i=window)||void 0===i||null===(n=i._tw_)||void 0===n||n.appSwitchChain())})),!1}return!0},onLimitSubmit:function(){try{var e,t,i,n;if(""===this.$store.state.wallet||"importAddress"===this.$store.state.wallet)return void this.handleWalletAddress();if(!this.supportChainLimit())return;var o=this.$store.getters.netId||(null===(e=this.$route.params)||void 0===e||null===(t=e.id)||void 0===t||null===(i=t.split)||void 0===i||null===(n=i.call(t,"-"))||void 0===n?void 0:n[1])||"";if(o!==this.netId)return void this.$toast({message:this.$t("plsSwitchChain",{chain:o}),position:"top"});0!==this.selected&&1!==this.selected&&3!==this.selected||(this.isLimitApprove||3===this.selected?this.openConfirmLimit():this.approveLimit())}catch(a){console.log(a)}},openConfirmLimit:function(){var e=0===this.activeTab?this.limitToken2:this.limitToken1,t=0===this.activeTab?this.limitToken1:this.limitToken2,i=0===this.activeTab?this.limitAmount2:this.limitAmount1,n=0===this.activeTab?this.limitAmount1:this.limitAmount2,o=0===this.activeTab?this.limitToken1.decimals:this.limitToken2.decimals;if(e.address===Yt["k"]){var a=window.navigator.userAgent;if(a.includes("OSType/2")){var s=a.replace(/^.*Ave.ai\/(.*) OSType\/2;$/,"$1"),l=Hi.lte(s,"2.4.0");if(l)return void this.$dialog.alert({title:this.$t("tips"),message:this.$t("limitOrderTips1"),confirmButtonText:this.$t("okay"),confirmButtonColor:"#558BED"})}}var r=new Si.a(this.limitSlippage||0);3===this.selected&&(r=new Si.a(this.noGasSlippage||0)),r=new Si.a(1).minus(r.div(100));var c=new Si.a(Yt["t"][e.chain||this.$store.getters.netId]||0).times(5);c=c.gte(3)?c.gte(50)?new Si.a(50):c:new Si.a(3);var u=new Si.a(i).times(e.price).gte(c.times(.999));if(!u){var d=this.$t("minimumTransactionAmount",{n:c.toFixed()});return 3===this.selected&&(d=this.$t("minimumTransactionNoGasAmount",{n:c.toFixed()})),void this.$dialog.alert({title:this.$t("tips"),message:d,confirmButtonText:this.$t("okay"),confirmButtonColor:"#558BED"})}this.limitInfo={orderType:3===this.selected?2:this.selected,fromToken:e,toToken:t,fromAmount:i,toAmount:n,targetToken:this.limitToken1.address,targetTokenInfo:this.limitToken1,targetLimitPrice:this.limitPrice,triggerPrice:this.triggerPrice,activeTab:this.activeTab,minReturn:new Si.a(n||0).times(r).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(o,"})?")))[0],slippage:3===this.selected?this.noGasSlippage:this.limitSlippage},console.log("limitInfo",this.limitInfo),this.dialogVisibleLimit=!0},submitLimitOrder:function(){var e=this;if(this.supportChainLimit()){var t=new Si.a(this.limitSlippage||0);3===this.selected&&(t=new Si.a(this.noGasSlippage||0)),t=new Si.a(1).minus(t.div(100));var i=this.$store.state.currentAccount;console.log("maker",i);var n=0===this.activeTab?this.limitToken2:this.limitToken1,o=0===this.activeTab?this.limitToken1:this.limitToken2,a=0===this.activeTab?this.limitAmount2:this.limitAmount1,s=0===this.activeTab?this.limitAmount1:this.limitAmount2,l=n.address,r=St["utils"].parseUnits(new Si.a(a||0).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(n.decimals,"})?")))[0],n.decimals).toString(),c=o.address,u=St["utils"].parseUnits(new Si.a(s||0).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(o.decimals,"})?")))[0],o.decimals).toString(),d=St["utils"].parseUnits(new Si.a(s||0).times(t).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(o.decimals,"})?")))[0],o.decimals).toString(),m=this.limitToken1.address,p=this.limitPrice;this.loadingConfirmLimit=!0;var h=3===this.selected?2:this.selected,b=this.triggerPrice,v=this.baseToken.token.current_price_usd?this.$f.formatNumber(this.baseToken.token.current_price_usd):"";if(3===this.selected){var f={chain:this.$store.getters.netId,from_token:l,from_amount:r,to_token:c,to_amount:u,maker:i,to_min_amount:d,target_token:m,target_limit_price:"0",trigger_price:"0",current_price:"0",order_type:2,open_time:0};Object(Kt["e"])(f).then((function(t){console.log("appExchangeNoGas result",t),t?setTimeout((function(){e.loadingConfirmLimit=!1,e.dialogVisibleLimit=!1,e.$toast.success(e.$t("transactionsSubmitted")),e.limitAmount1="",e.limitAmount2="",e.getNoGasList(!0)}),1e3):(e.loadingConfirmLimit=!1,e.$toast({message:e.$t("fail"),type:"fail"}))})).catch((function(t){console.log(t),e.loadingConfirmLimit=!1,e.$f.handleError(t)}))}else Object(Kt["Z"])(i,l,r,c,d,u,m,p,h,b,v).then((function(t){console.log(t),e.$notify({type:"success",message:e.$t("submitOrdersSuccess")}),e.getLimitOrder(),e.limitAmount1="",e.limitAmount2="",e.getGasBalance(),l===Yt["k"]&&(l===e.limitToken1.address?e.getToken1Info():l===e.limitToken2.address&&e.getToken2Info())})).catch((function(t){e.$f.handleError(t)})).finally((function(){e.loadingConfirmLimit=!1,e.dialogVisibleLimit=!1}))}},getAvgPrice:function(){if(!this.fromAmount||!this.toAmount)return"--";var e=this.fromAmount,t=this.toAmount;if(this.isTax){var i,n,o,a,s=(null===(i=this.swapQuoteInfo)||void 0===i?void 0:i.totalTax)||((null===(n=this.swapQuoteInfo)||void 0===n?void 0:n.total_sell_tax)||0)+((null===(o=this.swapQuoteInfo)||void 0===o?void 0:o.total_buy_tax)||0);s=Math.min(49,s),null!==(a=this.swapQuoteInfo)&&void 0!==a&&a.isAmountOut?e=new Si.a(e).times(100+s).div(100):t=new Si.a(t).times(100-s).div(100)}var l="solana"===this.chain?this.solanaSwapTokenPrice[0]:this.swapQuoteInfo.from_price,r="solana"===this.chain?this.solanaSwapTokenPrice[1]:this.swapQuoteInfo.to_price;return l&&r?0===this.activeTab?this.$f.formatNumber2(e/t/(r/l)*r):1===this.activeTab?this.$f.formatNumber2(t/e/(l/r)*l):void 0:"--"},onSubmitSlippage:function(e){this.slippageInfo=e,this.autoSlippage!==e.autoSlippage&&e.autoSlippage?(this.slippage=tn,localStorage.slippage=JSON.stringify(e.slippage),this.onCountDownFinish()):(this.slippage=e.slippage,localStorage.slippage=JSON.stringify(e.slippage)),this.autoSlippage=e.autoSlippage,localStorage.autoSlippage=JSON.stringify(e.autoSlippage)},onSubmitLimitSlippage:function(e){console.log("slippageInfo",e),null!==e&&void 0!==e&&e.slippage&&(localStorage.limitSlippage=(null===e||void 0===e?void 0:e.slippage)||"5")},onSubmitNoGasSlippage:function(e){console.log("slippageInfo",e),null!==e&&void 0!==e&&e.slippage&&(localStorage.noGasSlippage=(null===e||void 0===e?void 0:e.slippage)||"5")},minusTriggerPrice:function(){this.triggerPrice&&new Si.a(this.triggerPrice).gt("0")&&(this.triggerPrice=this.$f.formatNumber(new Si.a(this.triggerPrice).times(.99).toFixed()))},addTriggerPrice:function(){this.limitPrice&&new Si.a(this.triggerPrice).gt("0")&&(this.triggerPrice=this.$f.formatNumber(new Si.a(this.triggerPrice).times(1.01).toFixed()))},getNoGasList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i={account:this.$store.state.currentAccount,chain:this.$store.getters.netId};if(null!==i&&void 0!==i&&i.account&&null!==i&&void 0!==i&&i.chain){var n={maker:null===i||void 0===i?void 0:i.account,chain:null===i||void 0===i?void 0:i.chain};this.loadingGetNoGasList=!0,this.isHasUnTx=!0,Object(Kt["F"])(n).then((function(i){var n,o;e.noGasTxList=i||[],e.isHasUnTx=null===(n=e.noGasTxList)||void 0===n||null===(o=n.some)||void 0===o?void 0:o.call(n,(function(e){return 0===e.status||-1===e.status})),!e.isHasUnTx&&t&&(e.getUserTokenList(),e.getGasBalance(),e.getTokenDetails())})).finally((function(){setTimeout((function(){e.loadingGetNoGasList=!1}),800),Ki&&(clearTimeout(Ki),Ki=null),Ki=setTimeout((function(){var i,n;null!==(i=e.noGasTxList)&&void 0!==i&&null!==(n=i.some)&&void 0!==n&&n.call(i,(function(e){return 0===e.status||-1===e.status}))&&e.getNoGasList(t)}),1e4)}))}},getGasBalance:function(){var e,t,i,n,o,a=this,s=this.$store.getters.netId;null===(e=window)||void 0===e||null===(t=e.trustwallet)||void 0===t||!t.solana||null!==(i=window.ethereum)&&void 0!==i&&null!==(n=i.address)&&void 0!==n&&null!==(o=n.startsWith)&&void 0!==o&&o.call(n,"0x")||!window.ethereum.address||(s="solana"),"solana"!==s&&Object(Kt["v"])().then((function(e){a.gasBalance=e,a.hasNoGas()}))},hasNoGas:function(){var e,t;if(null!==(e=window)&&void 0!==e&&null!==(t=e._tw_)&&void 0!==t&&t.appExchangeNoGas){var i,n,o=new Si.a(this.gasBalance||0),a=0===this.activeTab?this.token2:this.token1,s=a.chain||this.$store.getters.netId,l=new Si.a(Yt["j"][s]||.001).div(2),r=o.lt(l)&&(null===(i=window)||void 0===i||null===(n=i._tw_)||void 0===n?void 0:n.appExchangeNoGas)&&"bsc"===s;return r&&2===this.selected?(this.selected=3,this.$dialog.alert({title:this.$t("tips"),message:this.$t("freeGasTips"),confirmButtonText:this.$t("confirm"),confirmButtonColor:"#3F80F7"})):r||3!==this.selected||(this.selected=2),void(this.isNoGas=r)}3===this.selected&&(this.selected=2),this.isNoGas=!1},updateGasPrice:function(e){this.gasSetting=e}}};i("265e");const an=_t()(on,[["render",Ye],["__scopeId","data-v-1de838ef"]]);t["default"]=an},"580e":function(e,t,i){},"5ceb":function(e,t,i){"use strict";i("e050")},"959c":function(e,t,i){"use strict";i("580e")},c2b9:function(e,t,i){},cbbc:function(e,t,i){},e050:function(e,t,i){},eb18:function(e,t,i){"use strict";i("c2b9")}}]);